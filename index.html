<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AgriSynth - AI Farm Management Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'agri-green': '#22c55e',
                        'agri-blue': '#3b82f6',
                        'agri-orange': '#f97316',
                        'agri-red': '#ef4444'
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-50 font-sans">
    <!-- Login Screen -->
    <div id="loginScreen" class="min-h-screen bg-gradient-to-br from-green-400 to-blue-500 flex items-center justify-center">
        <div class="bg-white p-8 rounded-lg shadow-2xl w-96">
            <div class="text-center mb-8">
                <h1 class="text-3xl font-bold text-gray-800 mb-2">🌾 AgriSynth</h1>
                <p class="text-gray-600">AI + IoT Farm Management</p>
            </div>
            <form id="loginForm" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Username</label>
                    <input type="text" id="username" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-agri-green" placeholder="Enter username">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Password</label>
                    <input type="password" id="password" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-agri-green" placeholder="Enter password">
                </div>
                <button type="submit" class="w-full bg-agri-green text-white py-2 rounded-md hover:bg-green-600 transition duration-200">Login</button>
                <div class="text-center">
                    <a href="#" class="text-sm text-agri-blue hover:underline">Forgot Password?</a>
                </div>
            </form>
            <div id="loginError" class="mt-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded hidden">
                Invalid credentials. Please try again.
            </div>
            <div class="mt-6 text-xs text-gray-500 text-center">
                Demo: farmer/password or admin/password
            </div>
        </div>
    </div>

    <!-- Admin Dashboard -->
    <div id="adminDashboard" class="hidden min-h-screen bg-gray-50">
        <!-- Admin Top Navigation -->
        <nav class="bg-white shadow-sm border-b">
            <div class="px-6 py-4 flex justify-between items-center">
                <div class="flex items-center space-x-4">
                    <h1 class="text-2xl font-bold text-gray-800">🔑 AgriSynth Admin</h1>
                    <span class="px-2 py-1 bg-red-500 text-white text-xs rounded-full">ADMIN</span>
                </div>
                <div class="flex items-center space-x-4">
                    <button onclick="showModal('addFarmModal')" class="bg-agri-green text-white px-4 py-2 rounded-md hover:bg-green-600 text-sm">➕ Add Farm</button>
                    <button onclick="showModal('manageUsersModal')" class="bg-agri-blue text-white px-4 py-2 rounded-md hover:bg-blue-600 text-sm">👤 Manage Users</button>
                    <button onclick="generateGlobalReport()" class="bg-purple-600 text-white px-4 py-2 rounded-md hover:bg-purple-700 text-sm">📊 Global Report</button>
                    <div class="relative">
                        <button id="adminNotificationBtn" class="relative p-2 text-gray-600 hover:text-gray-800">
                            🔔
                            <span class="absolute -top-1 -right-1 bg-agri-red text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">5</span>
                        </button>
                    </div>
                    <div class="relative">
                        <button onclick="toggleProfileDropdown()" class="flex items-center space-x-2 text-gray-700 hover:text-gray-900">
                            <span>Admin User</span>
                            <span>👤</span>
                        </button>
                        <div id="profileDropdown" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-10">
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Profile Settings</a>
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">System Settings</a>
                            <hr class="my-1">
                            <a href="#" onclick="logout()" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Logout</a>
                        </div>
                    </div>
                </div>
            </div>
        </nav>

        <div class="flex">
            <!-- Admin Sidebar -->
            <aside class="w-64 bg-white shadow-sm h-screen">
                <nav class="p-4">
                    <ul class="space-y-2">
                        <li><a href="#" onclick="showAdminSection('adminOverviewSection')" class="admin-nav-link active flex items-center space-x-3 px-3 py-2 rounded-md">📊 Dashboard</a></li>
                        <li><a href="#" onclick="showAdminSection('adminFarmsSection')" class="admin-nav-link flex items-center space-x-3 px-3 py-2 rounded-md">🏡 Farms Management</a></li>
                        <li><a href="#" onclick="showAdminSection('adminCropsSection')" class="admin-nav-link flex items-center space-x-3 px-3 py-2 rounded-md">🌱 Crops & Fields</a></li>
                        <li><a href="#" onclick="showAdminSection('adminLivestockSection')" class="admin-nav-link flex items-center space-x-3 px-3 py-2 rounded-md">🐄 Livestock</a></li>
                        <li><a href="#" onclick="showAdminSection('adminIotSection')" class="admin-nav-link flex items-center space-x-3 px-3 py-2 rounded-md">📡 IoT Devices</a></li>
                        <li><a href="#" onclick="showAdminSection('adminIrrigationSection')" class="admin-nav-link flex items-center space-x-3 px-3 py-2 rounded-md">💧 Irrigation</a></li>
                        <li><a href="#" onclick="showAdminSection('adminWeatherSection')" class="admin-nav-link flex items-center space-x-3 px-3 py-2 rounded-md">🌤️ Weather</a></li>
                        <li><a href="#" onclick="showAdminSection('adminReportsSection')" class="admin-nav-link flex items-center space-x-3 px-3 py-2 rounded-md">📈 Reports</a></li>
                        <li><a href="#" onclick="showAdminSection('adminTasksSection')" class="admin-nav-link flex items-center space-x-3 px-3 py-2 rounded-md">✅ Tasks & Alerts</a></li>
                        <li><a href="#" onclick="showAdminSection('adminSettingsSection')" class="admin-nav-link flex items-center space-x-3 px-3 py-2 rounded-md">⚙️ Settings & Users</a></li>
                    </ul>
                </nav>
            </aside>

            <!-- Admin Main Content -->
            <main class="flex-1 p-6">
                <!-- Admin Overview Section -->
                <div id="adminOverviewSection" class="admin-section">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6">🔑 System Overview</h2>
                    
                    <!-- System Stats Cards -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-sm font-medium text-gray-600">Total Farms</h3>
                                <span class="text-agri-green">🏡</span>
                            </div>
                            <div class="text-3xl font-bold text-gray-800">12</div>
                            <p class="text-xs text-green-600 mt-1">↗️ +2 this month</p>
                        </div>
                        
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-sm font-medium text-gray-600">Total Crops</h3>
                                <span class="text-agri-green">🌱</span>
                            </div>
                            <div class="text-3xl font-bold text-gray-800">48</div>
                            <p class="text-xs text-green-600 mt-1">↗️ +8 this season</p>
                        </div>
                        
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-sm font-medium text-gray-600">Total Livestock</h3>
                                <span class="text-agri-orange">🐄</span>
                            </div>
                            <div class="text-3xl font-bold text-gray-800">1,247</div>
                            <p class="text-xs text-blue-600 mt-1">➡️ Stable</p>
                        </div>
                        
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-sm font-medium text-gray-600">IoT Devices</h3>
                                <span class="text-agri-blue">📡</span>
                            </div>
                            <div class="text-3xl font-bold text-gray-800">156</div>
                            <p class="text-xs text-red-600 mt-1">⚠️ 3 offline</p>
                        </div>
                    </div>

                    <!-- Main Admin Grid -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <!-- Recent Activity Log -->
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">📋 Recent Activity Log</h3>
                            <div class="space-y-3 max-h-64 overflow-y-auto">
                                <div class="flex items-start space-x-3 p-3 bg-gray-50 rounded">
                                    <span class="text-agri-green">✅</span>
                                    <div class="flex-1">
                                        <p class="text-sm font-medium">John Farmer added new crop</p>
                                        <p class="text-xs text-gray-600">Field C - Wheat • 2 hours ago</p>
                                    </div>
                                </div>
                                <div class="flex items-start space-x-3 p-3 bg-gray-50 rounded">
                                    <span class="text-agri-blue">🔧</span>
                                    <div class="flex-1">
                                        <p class="text-sm font-medium">Sarah Vet updated livestock health</p>
                                        <p class="text-xs text-gray-600">Cattle C-001 vaccination • 4 hours ago</p>
                                    </div>
                                </div>
                                <div class="flex items-start space-x-3 p-3 bg-gray-50 rounded">
                                    <span class="text-agri-red">🚨</span>
                                    <div class="flex-1">
                                        <p class="text-sm font-medium">Device went offline</p>
                                        <p class="text-xs text-gray-600">pH Sensor PH-001 • 6 hours ago</p>
                                    </div>
                                </div>
                                <div class="flex items-start space-x-3 p-3 bg-gray-50 rounded">
                                    <span class="text-agri-green">💧</span>
                                    <div class="flex-1">
                                        <p class="text-sm font-medium">Irrigation completed</p>
                                        <p class="text-xs text-gray-600">Field A - 500L applied • 8 hours ago</p>
                                    </div>
                                </div>
                                <div class="flex items-start space-x-3 p-3 bg-gray-50 rounded">
                                    <span class="text-purple-600">👤</span>
                                    <div class="flex-1">
                                        <p class="text-sm font-medium">New user registered</p>
                                        <p class="text-xs text-gray-600">Mike Technician joined • 1 day ago</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Critical Alerts -->
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">🚨 Critical Alerts</h3>
                            <div class="space-y-3">
                                <div class="p-4 bg-red-50 border border-red-200 rounded">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="font-medium text-red-800">Water Tank Critical</span>
                                        <span class="bg-red-200 text-red-800 px-2 py-1 rounded-full text-xs">URGENT</span>
                                    </div>
                                    <p class="text-sm text-red-700">Tank B at Green Valley Farm - 8% capacity</p>
                                    <button onclick="resolveAlert('tank-b')" class="text-xs text-red-600 hover:underline mt-2">Resolve Alert</button>
                                </div>
                                <div class="p-4 bg-orange-50 border border-orange-200 rounded">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="font-medium text-orange-800">Device Offline</span>
                                        <span class="bg-orange-200 text-orange-800 px-2 py-1 rounded-full text-xs">HIGH</span>
                                    </div>
                                    <p class="text-sm text-orange-700">3 IoT sensors not responding</p>
                                    <button onclick="troubleshootDevices()" class="text-xs text-orange-600 hover:underline mt-2">Troubleshoot</button>
                                </div>
                                <div class="p-4 bg-yellow-50 border border-yellow-200 rounded">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="font-medium text-yellow-800">Livestock Health</span>
                                        <span class="bg-yellow-200 text-yellow-800 px-2 py-1 rounded-full text-xs">MEDIUM</span>
                                    </div>
                                    <p class="text-sm text-yellow-700">5 animals due for vaccination</p>
                                    <button onclick="scheduleVaccination()" class="text-xs text-yellow-600 hover:underline mt-2">Schedule</button>
                                </div>
                            </div>
                        </div>

                        <!-- User Management Panel -->
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-lg font-semibold text-gray-800">👥 User Management</h3>
                                <button onclick="showModal('addUserModal')" class="bg-agri-blue text-white px-3 py-1 rounded text-sm hover:bg-blue-600">Add User</button>
                            </div>
                            <div class="space-y-3">
                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-8 h-8 bg-green-500 rounded-full flex items-center justify-center text-white text-sm">JF</div>
                                        <div>
                                            <p class="font-medium text-sm">John Farmer</p>
                                            <p class="text-xs text-gray-600">Farmer • john@farm.com</p>
                                        </div>
                                    </div>
                                    <div class="flex space-x-2">
                                        <button onclick="editUser('john')" class="text-xs text-blue-600 hover:underline">Edit</button>
                                        <button onclick="removeUser('john')" class="text-xs text-red-600 hover:underline">Remove</button>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm">SV</div>
                                        <div>
                                            <p class="font-medium text-sm">Sarah Vet</p>
                                            <p class="text-xs text-gray-600">Veterinarian • sarah@vet.com</p>
                                        </div>
                                    </div>
                                    <div class="flex space-x-2">
                                        <button onclick="editUser('sarah')" class="text-xs text-blue-600 hover:underline">Edit</button>
                                        <button onclick="removeUser('sarah')" class="text-xs text-red-600 hover:underline">Remove</button>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center text-white text-sm">MT</div>
                                        <div>
                                            <p class="font-medium text-sm">Mike Technician</p>
                                            <p class="text-xs text-gray-600">Technician • mike@tech.com</p>
                                        </div>
                                    </div>
                                    <div class="flex space-x-2">
                                        <button onclick="editUser('mike')" class="text-xs text-blue-600 hover:underline">Edit</button>
                                        <button onclick="removeUser('mike')" class="text-xs text-red-600 hover:underline">Remove</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Reports & Analytics Snapshot -->
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">📊 Analytics Snapshot</h3>
                            <div class="space-y-4">
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">System Health</span>
                                    <div class="flex items-center space-x-2">
                                        <div class="w-20 bg-gray-200 rounded-full h-2">
                                            <div class="bg-green-500 h-2 rounded-full" style="width: 87%"></div>
                                        </div>
                                        <span class="text-sm font-medium">87%</span>
                                    </div>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">Water Usage Efficiency</span>
                                    <div class="flex items-center space-x-2">
                                        <div class="w-20 bg-gray-200 rounded-full h-2">
                                            <div class="bg-blue-500 h-2 rounded-full" style="width: 92%"></div>
                                        </div>
                                        <span class="text-sm font-medium">92%</span>
                                    </div>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">Yield Forecast</span>
                                    <div class="flex items-center space-x-2">
                                        <div class="w-20 bg-gray-200 rounded-full h-2">
                                            <div class="bg-green-500 h-2 rounded-full" style="width: 95%"></div>
                                        </div>
                                        <span class="text-sm font-medium text-green-600">+15%</span>
                                    </div>
                                </div>
                                <div class="mt-4 pt-4 border-t">
                                    <div class="grid grid-cols-2 gap-4 text-center">
                                        <div>
                                            <div class="text-2xl font-bold text-gray-800">$45.2K</div>
                                            <p class="text-xs text-gray-600">Monthly Revenue</p>
                                        </div>
                                        <div>
                                            <div class="text-2xl font-bold text-gray-800">98.5%</div>
                                            <p class="text-xs text-gray-600">Uptime</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Admin Farms Section -->
                <div id="adminFarmsSection" class="admin-section hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">🏡 Global Farms Management</h2>
                        <div class="flex space-x-3">
                            <button onclick="showModal('addFarmModal')" class="bg-agri-green text-white px-4 py-2 rounded-md hover:bg-green-600">➕ Add Farm</button>
                            <button onclick="exportFarmsData()" class="bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700">📊 Export Data</button>
                        </div>
                    </div>
                    <main class="p-6">
                            <div class="bg-white rounded-lg shadow-sm border overflow-hidden">
                                <table class="w-full">
                                <thead class="bg-gray-50">
                                    <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Farm Name</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Owner</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Location</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Size</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Type</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Status</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="farmTableBody" class="divide-y divide-gray-200"></tbody>
                                </table>
                            </div>
                    </main>
                    <div id="farmModal" class="hidden fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50">
    <div class="bg-white p-6 rounded-lg shadow-lg w-96">
      <h3 id="farmModalTitle" class="text-lg font-bold mb-4">Add Farm</h3>
      <input type="hidden" id="farmId">
      <div class="mb-3">
        <label class="block text-sm">Farm Name</label>
        <input id="farmName" type="text" class="w-full border px-3 py-2 rounded">
      </div>
      <div class="mb-3">
        <label class="block text-sm">Owner</label>
        <input id="farmOwner" type="text" class="w-full border px-3 py-2 rounded">
      </div>
      <div class="mb-3">
        <label class="block text-sm">Location</label>
        <input id="farmLocation" type="text" class="w-full border px-3 py-2 rounded">
      </div>
      <div class="mb-3">
        <label class="block text-sm">Size</label>
        <input id="farmSize" type="text" class="w-full border px-3 py-2 rounded">
      </div>
      <div class="mb-3">
        <label class="block text-sm">Type</label>
        <input id="farmType" type="text" class="w-full border px-3 py-2 rounded">
      </div>
      <div class="mb-3">
        <label class="block text-sm">Status</label>
        <select id="farmStatus" class="w-full border px-3 py-2 rounded">
          <option value="Active">Active</option>
          <option value="Maintenance">Maintenance</option>
        </select>
      </div>
      <div class="flex justify-end space-x-2 mt-4">
        <button onclick="closeFarmModal()" class="px-4 py-2 rounded bg-gray-300">Cancel</button>
        <button onclick="saveFarm()" class="px-4 py-2 rounded bg-agri-green text-white">Save</button>
      </div>
    </div>
  </div>

<script>
// ---------------------- FARMS CRUD ----------------------
function seedFarms() {
  const demoFarms = [
    {id: Date.now()+1, name:"Green Valley Farm", owner:"John Farmer", location:"California, USA", size:"150 acres", type:"Mixed Farm", status:"Active"},
    {id: Date.now()+2, name:"Sunrise Ranch", owner:"Sarah Johnson", location:"Texas, USA", size:"200 acres", type:"Livestock Farm", status:"Active"},
    {id: Date.now()+3, name:"Prairie Fields", owner:"Mike Wilson", location:"Iowa, USA", size:"300 acres", type:"Crop Farm", status:"Maintenance"}
  ];
  localStorage.setItem('farms', JSON.stringify(demoFarms));
}

function loadFarms() {
  let farms = JSON.parse(localStorage.getItem('farms'));
  if (!farms || farms.length === 0) {
    seedFarms();
    farms = JSON.parse(localStorage.getItem('farms'));
  }
  renderFarms(farms);
}

function renderFarms(farms) {
  let tbody = document.getElementById('farmTableBody');
  tbody.innerHTML = '';
  farms.forEach(farm => {
    let row = `<tr class="hover:bg-gray-50">
      <td class="px-6 py-4 text-sm font-medium">${farm.name}</td>
      <td class="px-6 py-4 text-sm">${farm.owner}</td>
      <td class="px-6 py-4 text-sm">${farm.location}</td>
      <td class="px-6 py-4 text-sm">${farm.size}</td>
      <td class="px-6 py-4 text-sm">${farm.type}</td>
      <td class="px-6 py-4 text-sm"><span class="px-2 py-1 rounded-full text-xs ${farm.status==='Active'?'bg-green-100 text-green-800':'bg-yellow-100 text-yellow-800'}">${farm.status}</span></td>
      <td class="px-6 py-4 text-sm">
        <button onclick="openFarmModal(${farm.id})" class="text-green-600 hover:underline text-xs mr-2">Edit</button>
        <button onclick="deleteFarm(${farm.id})" class="text-red-600 hover:underline text-xs">Delete</button>
      </td>
    </tr>`;
    tbody.innerHTML += row;
  });
}

function openFarmModal(id=null) {
  document.getElementById('farmModal').classList.remove('hidden');
  document.getElementById('farmId').value = id || '';
  if (id) {
    document.getElementById('farmModalTitle').innerText = "Edit Farm";
    let farms = JSON.parse(localStorage.getItem('farms')) || [];
    let farm = farms.find(f => f.id === id);
    document.getElementById('farmName').value = farm.name;
    document.getElementById('farmOwner').value = farm.owner;
    document.getElementById('farmLocation').value = farm.location;
    document.getElementById('farmSize').value = farm.size;
    document.getElementById('farmType').value = farm.type;
    document.getElementById('farmStatus').value = farm.status;
  } else {
    document.getElementById('farmModalTitle').innerText = "Add Farm";
    document.getElementById('farmName').value = '';
    document.getElementById('farmOwner').value = '';
    document.getElementById('farmLocation').value = '';
    document.getElementById('farmSize').value = '';
    document.getElementById('farmType').value = '';
    document.getElementById('farmStatus').value = 'Active';
  }
}

function closeFarmModal() {
  document.getElementById('farmModal').classList.add('hidden');
}

function saveFarm() {
  let id = document.getElementById('farmId').value;
  let farm = {
    id: id ? parseInt(id) : Date.now(),
    name: document.getElementById('farmName').value,
    owner: document.getElementById('farmOwner').value,
    location: document.getElementById('farmLocation').value,
    size: document.getElementById('farmSize').value,
    type: document.getElementById('farmType').value,
    status: document.getElementById('farmStatus').value
  };
  let farms = JSON.parse(localStorage.getItem('farms')) || [];
  if (id) {
    let index = farms.findIndex(f => f.id === parseInt(id));
    farms[index] = farm;
  } else {
    farms.push(farm);
  }
  localStorage.setItem('farms', JSON.stringify(farms));
  closeFarmModal();
  loadFarms();
}

function deleteFarm(id) {
  if (confirm("Are you sure you want to delete this farm?")) {
    let farms = JSON.parse(localStorage.getItem('farms')) || [];
    farms = farms.filter(f => f.id !== id);
    localStorage.setItem('farms', JSON.stringify(farms));
    loadFarms();
  }
}
</script>
                    
                </div>

                <!-- Admin Crops Section -->
                <div id="adminCropsSection" class="admin-section hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">🌱 Global Crops Management</h2>
                        <div class="flex space-x-3">
                            <button onclick="showModal('addCropModal')" class="bg-agri-green text-white px-4 py-2 rounded-md hover:bg-green-600">🌱 Add Crop</button>
                            <button onclick="bulkCropAction()" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700">📋 Bulk Actions</button>
                            <button onclick="exportCropsData()" class="bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700">📊 Export</button>
                        </div>  
                    </div>
                    
                    <!-- Crops Overview Cards -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-sm font-medium text-gray-600">Total Crops</h3>
                                <span class="text-agri-green">🌱</span>
                            </div>
                            <div class="text-3xl font-bold text-gray-800">48</div>
                            <p class="text-xs text-green-600 mt-1">↗️ +8 this season</p>
                        </div>
                        
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-sm font-medium text-gray-600">Healthy Crops</h3>
                                <span class="text-green-500">✅</span>
                            </div>
                            <div class="text-3xl font-bold text-gray-800">42</div>
                            <p class="text-xs text-green-600 mt-1">87.5% health rate</p>
                        </div>
                        
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-sm font-medium text-gray-600">Need Attention</h3>
                                <span class="text-yellow-500">⚠️</span>
                            </div>
                            <div class="text-3xl font-bold text-gray-800">6</div>
                            <p class="text-xs text-yellow-600 mt-1">12.5% monitoring</p>
                        </div>
                        
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-sm font-medium text-gray-600">Ready to Harvest</h3>
                                <span class="text-orange-500">🌾</span>
                            </div>
                            <div class="text-3xl font-bold text-gray-800">12</div>
                            <p class="text-xs text-orange-600 mt-1">Next 7 days</p>
                        </div>
                    </div>

                    <!-- Crops Management Table -->
                    <div class="bg-white rounded-lg shadow-sm border overflow-hidden">
                        <div class="p-4 border-b">
                            <div class="flex space-x-4">
                                <input type="text" placeholder="Search crops..." class="flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm">
                                <select class="px-3 py-2 border border-gray-300 rounded-md text-sm">
                                    <option>All Farms</option>
                                    <option>Green Valley Farm</option>
                                    <option>Sunrise Ranch</option>
                                    <option>Prairie Fields</option>
                                </select>
                                <select class="px-3 py-2 border border-gray-300 rounded-md text-sm">
                                    <option>All Crop Types</option>
                                    <option>Vegetables</option>
                                    <option>Grains</option>
                                    <option>Fruits</option>
                                </select>
                                <select class="px-3 py-2 border border-gray-300 rounded-md text-sm">
                                    <option>All Status</option>
                                    <option>Healthy</option>
                                    <option>Needs Attention</option>
                                    <option>Ready to Harvest</option>
                                </select>
                            </div>
                        </div>
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">
                                        <input type="checkbox" class="rounded">
                                    </th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100">Crop Name ↕️</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100">Farm ↕️</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100">Field ↕️</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100">Type ↕️</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100">Stage ↕️</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100">Health ↕️</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100">Planted ↕️</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Actions</th> 
                                   
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-200">
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4"><input type="checkbox" class="rounded"></td>
                                    <td class="px-6 py-4 text-sm font-medium">Tomatoes - Cherry</td>
                                    <td class="px-6 py-4 text-sm">Green Valley Farm</td>
                                    <td class="px-6 py-4 text-sm">Field A</td>
                                    <td class="px-6 py-4 text-sm">Vegetable</td>
                                    <td class="px-6 py-4 text-sm">Flowering</td>
                                    <td class="px-6 py-4 text-sm"><span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs">85% Healthy</span></td>
                                    <td class="px-6 py-4 text-sm">Mar 15, 2024</td>
                                    <td class="px-6 py-4 text-sm">
                                        <button onclick="viewCropDetails('tomatoes-a')" class="text-blue-600 hover:underline text-xs mr-2">View</button>
                                        <button onclick="editCrop('tomatoes-a')" class="text-green-600 hover:underline text-xs mr-2">Edit</button>
                                        <button onclick="deleteCrop('tomatoes-a')" class="text-red-600 hover:underline text-xs">Delete</button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4"><input type="checkbox" class="rounded"></td>
                                    <td class="px-6 py-4 text-sm font-medium">Corn - Sweet</td>
                                    <td class="px-6 py-4 text-sm">Prairie Fields</td>
                                    <td class="px-6 py-4 text-sm">Field B</td>
                                    <td class="px-6 py-4 text-sm">Grain</td>
                                    <td class="px-6 py-4 text-sm">Maturation</td>
                                    <td class="px-6 py-4 text-sm"><span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs">92% Healthy</span></td>
                                    <td class="px-6 py-4 text-sm">Feb 20, 2024</td>
                                    <td class="px-6 py-4 text-sm">
                                        <button onclick="viewCropDetails('corn-b')" class="text-blue-600 hover:underline text-xs mr-2">View</button>
                                        <button onclick="editCrop('corn-b')" class="text-green-600 hover:underline text-xs mr-2">Edit</button>
                                        <button onclick="deleteCrop('corn-b')" class="text-red-600 hover:underline text-xs">Delete</button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4"><input type="checkbox" class="rounded"></td>
                                    <td class="px-6 py-4 text-sm font-medium">Wheat - Winter</td>
                                    <td class="px-6 py-4 text-sm">Sunrise Ranch</td>
                                    <td class="px-6 py-4 text-sm">Field C</td>
                                    <td class="px-6 py-4 text-sm">Grain</td>
                                    <td class="px-6 py-4 text-sm">Growth</td>
                                    <td class="px-6 py-4 text-sm"><span class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs">78% Attention</span></td>
                                    <td class="px-6 py-4 text-sm">Jan 10, 2024</td>
                                    <td class="px-6 py-4 text-sm">
                                        <button onclick="viewCropDetails('wheat-c')" class="text-blue-600 hover:underline text-xs mr-2">View</button>
                                        <button onclick="editCrop('wheat-c')" class="text-green-600 hover:underline text-xs mr-2">Edit</button>
                                        <button onclick="deleteCrop('wheat-c')" class="text-red-600 hover:underline text-xs">Delete</button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4"><input type="checkbox" class="rounded"></td>
                                    <td class="px-6 py-4 text-sm font-medium">Strawberries</td>
                                    <td class="px-6 py-4 text-sm">Green Valley Farm</td>
                                    <td class="px-6 py-4 text-sm">Field D</td>
                                    <td class="px-6 py-4 text-sm">Fruit</td>
                                    <td class="px-6 py-4 text-sm">Harvest Ready</td>
                                    <td class="px-6 py-4 text-sm"><span class="bg-orange-100 text-orange-800 px-2 py-1 rounded-full text-xs">Ready</span></td>
                                    <td class="px-6 py-4 text-sm">Dec 5, 2023</td>
                                    <td class="px-6 py-4 text-sm">
                                        <button onclick="viewCropDetails('strawberries-d')" class="text-blue-600 hover:underline text-xs mr-2">View</button>
                                        <button onclick="editCrop('strawberries-d')" class="text-green-600 hover:underline text-xs mr-2">Edit</button>
                                        <button onclick="deleteCrop('strawberries-d')" class="text-red-600 hover:underline text-xs">Delete</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div id="adminLivestockSection" class="admin-section hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">🐄 Global Livestock Management</h2>
                        <div class="flex space-x-3">
                            <button onclick="showModal('addAnimalModal')" class="bg-agri-green text-white px-4 py-2 rounded-md hover:bg-green-600">🐄 Add Animal</button>
                            <button onclick="scheduleVetVisit()" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700">🏥 Schedule Vet</button>
                            <button onclick="exportLivestockData()" class="bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700">📊 Export</button>
                        </div>
                    </div>
                    
                    <!-- Livestock Overview Cards -->
                    <div class="grid grid-cols-1 md:grid-cols-5 gap-6 mb-8">
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-sm font-medium text-gray-600">Total Animals</h3>
                                <span class="text-agri-orange">🐄</span>
                            </div>
                            <div class="text-3xl font-bold text-gray-800">1,247</div>
                            <p class="text-xs text-orange-600 mt-1">Across all farms</p>
                        </div>
                        
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-sm font-medium text-gray-600">Healthy</h3>
                                <span class="text-green-500">✅</span>
                            </div>
                            <div class="text-3xl font-bold text-gray-800">1,235</div>
                            <p class="text-xs text-green-600 mt-1">99% health rate</p>
                        </div>
                        
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-sm font-medium text-gray-600">Under Treatment</h3>
                                <span class="text-red-500">🏥</span>
                            </div>
                            <div class="text-3xl font-bold text-gray-800">12</div>
                            <p class="text-xs text-red-600 mt-1">Need attention</p>
                        </div>
                        
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-sm font-medium text-gray-600">Vaccinations Due</h3>
                                <span class="text-yellow-500">💉</span>
                            </div>
                            <div class="text-3xl font-bold text-gray-800">28</div>
                            <p class="text-xs text-yellow-600 mt-1">Next 7 days</p>
                        </div>
                        
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-sm font-medium text-gray-600">Breeding Ready</h3>
                                <span class="text-purple-500">💕</span>
                            </div>
                            <div class="text-3xl font-bold text-gray-800">45</div>
                            <p class="text-xs text-purple-600 mt-1">Optimal timing</p>
                        </div>
                    </div>

                    <!-- Livestock by Type -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">🐄 Livestock by Type</h3>
                            <div class="space-y-4">
                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">🐄</span>
                                        <div>
                                            <p class="font-medium text-sm">Cattle</p>
                                            <p class="text-xs text-gray-600">Dairy & Beef</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="font-bold text-lg">456</p>
                                        <p class="text-xs text-green-600">98% healthy</p>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">🐷</span>
                                        <div>
                                            <p class="font-medium text-sm">Pigs</p>
                                            <p class="text-xs text-gray-600">Various breeds</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="font-bold text-lg">234</p>
                                        <p class="text-xs text-green-600">99% healthy</p>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">🐔</span>
                                        <div>
                                            <p class="font-medium text-sm">Chickens</p>
                                            <p class="text-xs text-gray-600">Layers & Broilers</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="font-bold text-lg">487</p>
                                        <p class="text-xs text-green-600">97% healthy</p>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">🐑</span>
                                        <div>
                                            <p class="font-medium text-sm">Sheep</p>
                                            <p class="text-xs text-gray-600">Wool & Meat</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="font-bold text-lg">70</p>
                                        <p class="text-xs text-green-600">100% healthy</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Health Alerts -->
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">🏥 Health Alerts</h3>
                            <div class="space-y-3">
                                <div class="p-4 bg-red-50 border border-red-200 rounded">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="font-medium text-red-800">Cattle C-045 - Fever</span>
                                        <span class="bg-red-200 text-red-800 px-2 py-1 rounded-full text-xs">URGENT</span>
                                    </div>
                                    <p class="text-sm text-red-700">Green Valley Farm - Requires immediate attention</p>
                                    <button onclick="treatAnimal('C-045')" class="text-xs text-red-600 hover:underline mt-2">Schedule Treatment</button>
                                </div>
                                <div class="p-4 bg-yellow-50 border border-yellow-200 rounded">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="font-medium text-yellow-800">Vaccination Schedule</span>
                                        <span class="bg-yellow-200 text-yellow-800 px-2 py-1 rounded-full text-xs">DUE</span>
                                    </div>
                                    <p class="text-sm text-yellow-700">28 animals due for vaccination this week</p>
                                    <button onclick="scheduleVaccination()" class="text-xs text-yellow-600 hover:underline mt-2">Schedule All</button>
                                </div>
                                <div class="p-4 bg-blue-50 border border-blue-200 rounded">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="font-medium text-blue-800">Breeding Program</span>
                                        <span class="bg-blue-200 text-blue-800 px-2 py-1 rounded-full text-xs">READY</span>
                                    </div>
                                    <p class="text-sm text-blue-700">45 animals in optimal breeding condition</p>
                                    <button onclick="manageBreeding()" class="text-xs text-blue-600 hover:underline mt-2">Manage Program</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Livestock Management Table -->
                    <div class="bg-white rounded-lg shadow-sm border overflow-hidden">
                        <div class="p-4 border-b">
                            <div class="flex space-x-4">
                                <input type="text" placeholder="Search animals..." class="flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm">
                                <select class="px-3 py-2 border border-gray-300 rounded-md text-sm">
                                    <option>All Farms</option>
                                    <option>Green Valley Farm</option>
                                    <option>Sunrise Ranch</option>
                                    <option>Prairie Fields</option>
                                </select>
                                <select class="px-3 py-2 border border-gray-300 rounded-md text-sm">
                                    <option>All Types</option>
                                    <option>Cattle</option>
                                    <option>Pigs</option>
                                    <option>Chickens</option>
                                    <option>Sheep</option>
                                </select>
                                <select class="px-3 py-2 border border-gray-300 rounded-md text-sm">
                                    <option>All Status</option>
                                    <option>Healthy</option>
                                    <option>Under Treatment</option>
                                    <option>Vaccination Due</option>
                                </select>
                            </div>
                        </div>
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">
                                        <input type="checkbox" class="rounded">
                                    </th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100">ID ↕️</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100">Type ↕️</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100">Farm ↕️</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100">Age ↕️</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100">Weight ↕️</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100">Health ↕️</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100">Last Check ↕️</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-200">
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4"><input type="checkbox" class="rounded"></td>
                                    <td class="px-6 py-4 text-sm font-medium">C-045</td>
                                    <td class="px-6 py-4 text-sm">🐄 Cattle</td>
                                    <td class="px-6 py-4 text-sm">Green Valley Farm</td>
                                    <td class="px-6 py-4 text-sm">3 years</td>
                                    <td class="px-6 py-4 text-sm">650 kg</td>
                                    <td class="px-6 py-4 text-sm"><span class="bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs">Fever</span></td>
                                    <td class="px-6 py-4 text-sm">Today</td>
                                    <td class="px-6 py-4 text-sm">
                                        <button onclick="viewAnimalDetails('C-045')" class="text-blue-600 hover:underline text-xs mr-2">View</button>
                                        <button onclick="treatAnimal('C-045')" class="text-red-600 hover:underline text-xs mr-2">Treat</button>
                                        <button onclick="editAnimal('C-045')" class="text-green-600 hover:underline text-xs">Edit</button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4"><input type="checkbox" class="rounded"></td>
                                    <td class="px-6 py-4 text-sm font-medium">P-123</td>
                                    <td class="px-6 py-4 text-sm">🐷 Pig</td>
                                    <td class="px-6 py-4 text-sm">Sunrise Ranch</td>
                                    <td class="px-6 py-4 text-sm">1.5 years</td>
                                    <td class="px-6 py-4 text-sm">180 kg</td>
                                    <td class="px-6 py-4 text-sm"><span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs">Healthy</span></td>
                                    <td class="px-6 py-4 text-sm">2 days ago</td>
                                    <td class="px-6 py-4 text-sm">
                                        <button onclick="viewAnimalDetails('P-123')" class="text-blue-600 hover:underline text-xs mr-2">View</button>
                                        <button onclick="scheduleCheckup('P-123')" class="text-yellow-600 hover:underline text-xs mr-2">Checkup</button>
                                        <button onclick="editAnimal('P-123')" class="text-green-600 hover:underline text-xs">Edit</button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4"><input type="checkbox" class="rounded"></td>
                                    <td class="px-6 py-4 text-sm font-medium">CH-456</td>
                                    <td class="px-6 py-4 text-sm">🐔 Chicken</td>
                                    <td class="px-6 py-4 text-sm">Prairie Fields</td>
                                    <td class="px-6 py-4 text-sm">8 months</td>
                                    <td class="px-6 py-4 text-sm">2.1 kg</td>
                                    <td class="px-6 py-4 text-sm"><span class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs">Vaccination Due</span></td>
                                    <td class="px-6 py-4 text-sm">1 week ago</td>
                                    <td class="px-6 py-4 text-sm">
                                        <button onclick="viewAnimalDetails('CH-456')" class="text-blue-600 hover:underline text-xs mr-2">View</button>
                                        <button onclick="scheduleVaccination('CH-456')" class="text-yellow-600 hover:underline text-xs mr-2">Vaccinate</button>
                                        <button onclick="editAnimal('CH-456')" class="text-green-600 hover:underline text-xs">Edit</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
<!-- Admin Iot Section -->
                <div id="adminIotSection" class="admin-section hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">📡 Global IoT Device Management</h2>
                        <div class="flex space-x-3">
                            <button onclick="showModal('addDeviceModal')" class="bg-agri-green text-white px-4 py-2 rounded-md hover:bg-green-600">📡 Add Device</button>
                            <button onclick="bulkDeviceAction()" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700">🔧 Bulk Actions</button>
                            <button onclick="exportDeviceData()" class="bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700">📊 Export</button>
                        </div>
                    </div>
                    
                    <!-- IoT Overview Cards -->
                    <div class="grid grid-cols-1 md:grid-cols-5 gap-6 mb-8">
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-sm font-medium text-gray-600">Total Devices</h3>
                                <span class="text-agri-blue">📡</span>
                            </div>
                            <div class="text-3xl font-bold text-gray-800">156</div>
                            <p class="text-xs text-blue-600 mt-1">Across all farms</p>
                        </div>
                        
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-sm font-medium text-gray-600">Online</h3>
                                <span class="text-green-500">🟢</span>
                            </div>
                            <div class="text-3xl font-bold text-gray-800">153</div>
                            <p class="text-xs text-green-600 mt-1">98.1% uptime</p>
                        </div>
                        
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-sm font-medium text-gray-600">Offline</h3>
                                <span class="text-red-500">🔴</span>
                            </div>
                            <div class="text-3xl font-bold text-gray-800">3</div>
                            <p class="text-xs text-red-600 mt-1">Need attention</p>
                        </div>
                        
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-sm font-medium text-gray-600">Maintenance</h3>
                                <span class="text-yellow-500">🔧</span>
                            </div>
                            <div class="text-3xl font-bold text-gray-800">5</div>
                            <p class="text-xs text-yellow-600 mt-1">Scheduled</p>
                        </div>
                        
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-sm font-medium text-gray-600">Critical Alerts</h3>
                                <span class="text-red-500">🚨</span>
                            </div>
                            <div class="text-3xl font-bold text-gray-800">7</div>
                            <p class="text-xs text-red-600 mt-1">Require action</p>
                        </div>
                    </div>

                    <!-- Device Types and Status -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">📊 Device Types</h3>
                            <div class="space-y-4">
                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">💧</span>
                                        <div>
                                            <p class="font-medium text-sm">Soil Moisture Sensors</p>
                                            <p class="text-xs text-gray-600">Field monitoring</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="font-bold text-lg">45</p>
                                        <p class="text-xs text-green-600">44 online</p>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">🌡️</span>
                                        <div>
                                            <p class="font-medium text-sm">Temperature Sensors</p>
                                            <p class="text-xs text-gray-600">Climate monitoring</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="font-bold text-lg">38</p>
                                        <p class="text-xs text-green-600">38 online</p>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">🧪</span>
                                        <div>
                                            <p class="font-medium text-sm">pH Sensors</p>
                                            <p class="text-xs text-gray-600">Soil chemistry</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="font-bold text-lg">28</p>
                                        <p class="text-xs text-red-600">26 online</p>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">📹</span>
                                        <div>
                                            <p class="font-medium text-sm">Security Cameras</p>
                                            <p class="text-xs text-gray-600">Farm surveillance</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="font-bold text-lg">24</p>
                                        <p class="text-xs text-green-600">24 online</p>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">💨</span>
                                        <div>
                                            <p class="font-medium text-sm">Weather Stations</p>
                                            <p class="text-xs text-gray-600">Meteorological data</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="font-bold text-lg">21</p>
                                        <p class="text-xs text-green-600">21 online</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Critical Device Alerts -->
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">🚨 Critical Device Alerts</h3>
                            <div class="space-y-3">
                                <div class="p-4 bg-red-50 border border-red-200 rounded">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="font-medium text-red-800">pH-003 Offline</span>
                                        <span class="bg-red-200 text-red-800 px-2 py-1 rounded-full text-xs">CRITICAL</span>
                                    </div>
                                    <p class="text-sm text-red-700">Green Valley Farm - Field A - No data for 6 hours</p>
                                    <button onclick="troubleshootDevice('pH-003')" class="text-xs text-red-600 hover:underline mt-2">Troubleshoot</button>
                                </div>
                                <div class="p-4 bg-red-50 border border-red-200 rounded">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="font-medium text-red-800">SM-012 Battery Low</span>
                                        <span class="bg-red-200 text-red-800 px-2 py-1 rounded-full text-xs">URGENT</span>
                                    </div>
                                    <p class="text-sm text-red-700">Prairie Fields - Field C - 5% battery remaining</p>
                                    <button onclick="scheduleReplacement('SM-012')" class="text-xs text-red-600 hover:underline mt-2">Schedule Replacement</button>
                                </div>
                                <div class="p-4 bg-yellow-50 border border-yellow-200 rounded">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="font-medium text-yellow-800">Maintenance Due</span>
                                        <span class="bg-yellow-200 text-yellow-800 px-2 py-1 rounded-full text-xs">SCHEDULED</span>
                                    </div>
                                    <p class="text-sm text-yellow-700">5 devices due for routine maintenance this week</p>
                                    <button onclick="viewMaintenanceSchedule()" class="text-xs text-yellow-600 hover:underline mt-2">View Schedule</button>
                                </div>
                                <div class="p-4 bg-blue-50 border border-blue-200 rounded">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="font-medium text-blue-800">Firmware Updates</span>
                                        <span class="bg-blue-200 text-blue-800 px-2 py-1 rounded-full text-xs">AVAILABLE</span>
                                    </div>
                                    <p class="text-sm text-blue-700">12 devices have firmware updates available</p>
                                    <button onclick="updateFirmware()" class="text-xs text-blue-600 hover:underline mt-2">Update All</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Device Management Table -->
                    <div class="bg-white rounded-lg shadow-sm border overflow-hidden">
                        <div class="p-4 border-b">
                            <div class="flex space-x-4">
                                <input type="text" placeholder="Search devices..." class="flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm">
                                <select class="px-3 py-2 border border-gray-300 rounded-md text-sm">
                                    <option>All Farms</option>
                                    <option>Green Valley Farm</option>
                                    <option>Sunrise Ranch</option>
                                    <option>Prairie Fields</option>
                                </select>
                                <select class="px-3 py-2 border border-gray-300 rounded-md text-sm">
                                    <option>All Device Types</option>
                                    <option>Soil Moisture</option>
                                    <option>Temperature</option>
                                    <option>pH Sensors</option>
                                    <option>Cameras</option>
                                    <option>Weather Stations</option>
                                </select>
                                <select class="px-3 py-2 border border-gray-300 rounded-md text-sm">
                                    <option>All Status</option>
                                    <option>Online</option>
                                    <option>Offline</option>
                                    <option>Maintenance</option>
                                    <option>Low Battery</option>
                                </select>
                            </div>
                        </div>
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">
                                        <input type="checkbox" class="rounded">
                                    </th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100">Device ID ↕️</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100">Type ↕️</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100">Farm ↕️</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100">Location ↕️</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100">Status ↕️</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100">Battery ↕️</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100">Last Update ↕️</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-200">
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4"><input type="checkbox" class="rounded"></td>
                                    <td class="px-6 py-4 text-sm font-medium">SM-001</td>
                                    <td class="px-6 py-4 text-sm">💧 Soil Moisture</td>
                                    <td class="px-6 py-4 text-sm">Green Valley Farm</td>
                                    <td class="px-6 py-4 text-sm">Field A - Zone 1</td>
                                    <td class="px-6 py-4 text-sm"><span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs">Online</span></td>
                                    <td class="px-6 py-4 text-sm">85%</td>
                                    <td class="px-6 py-4 text-sm">2 min ago</td>
                                    <td class="px-6 py-4 text-sm">
                                        <button onclick="viewDeviceDetails('SM-001')" class="text-blue-600 hover:underline text-xs mr-2">View</button>
                                        <button onclick="configureDevice('SM-001')" class="text-green-600 hover:underline text-xs mr-2">Config</button>
                                        <button onclick="resetDevice('SM-001')" class="text-yellow-600 hover:underline text-xs">Reset</button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4"><input type="checkbox" class="rounded"></td>
                                    <td class="px-6 py-4 text-sm font-medium">pH-003</td>
                                    <td class="px-6 py-4 text-sm">🧪 pH Sensor</td>
                                    <td class="px-6 py-4 text-sm">Green Valley Farm</td>
                                    <td class="px-6 py-4 text-sm">Field A - Zone 2</td>
                                    <td class="px-6 py-4 text-sm"><span class="bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs">Offline</span></td>
                                    <td class="px-6 py-4 text-sm">--</td>
                                    <td class="px-6 py-4 text-sm">6 hours ago</td>
                                    <td class="px-6 py-4 text-sm">
                                        <button onclick="troubleshootDevice('pH-003')" class="text-red-600 hover:underline text-xs mr-2">Troubleshoot</button>
                                        <button onclick="replaceDevice('pH-003')" class="text-orange-600 hover:underline text-xs mr-2">Replace</button>
                                        <button onclick="resetDevice('pH-003')" class="text-yellow-600 hover:underline text-xs">Reset</button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4"><input type="checkbox" class="rounded"></td>
                                    <td class="px-6 py-4 text-sm font-medium">TEMP-007</td>
                                    <td class="px-6 py-4 text-sm">🌡️ Temperature</td>
                                    <td class="px-6 py-4 text-sm">Sunrise Ranch</td>
                                    <td class="px-6 py-4 text-sm">Greenhouse 1</td>
                                    <td class="px-6 py-4 text-sm"><span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs">Online</span></td>
                                    <td class="px-6 py-4 text-sm">92%</td>
                                    <td class="px-6 py-4 text-sm">1 min ago</td>
                                    <td class="px-6 py-4 text-sm">
                                        <button onclick="viewDeviceDetails('TEMP-007')" class="text-blue-600 hover:underline text-xs mr-2">View</button>
                                        <button onclick="configureDevice('TEMP-007')" class="text-green-600 hover:underline text-xs mr-2">Config</button>
                                        <button onclick="calibrateDevice('TEMP-007')" class="text-purple-600 hover:underline text-xs">Calibrate</button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4"><input type="checkbox" class="rounded"></td>
                                    <td class="px-6 py-4 text-sm font-medium">SM-012</td>
                                    <td class="px-6 py-4 text-sm">💧 Soil Moisture</td>
                                    <td class="px-6 py-4 text-sm">Prairie Fields</td>
                                    <td class="px-6 py-4 text-sm">Field C - Zone 3</td>
                                    <td class="px-6 py-4 text-sm"><span class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs">Low Battery</span></td>
                                    <td class="px-6 py-4 text-sm">5%</td>
                                    <td class="px-6 py-4 text-sm">15 min ago</td>
                                    <td class="px-6 py-4 text-sm">
                                        <button onclick="scheduleReplacement('SM-012')" class="text-red-600 hover:underline text-xs mr-2">Replace</button>
                                        <button onclick="viewDeviceDetails('SM-012')" class="text-blue-600 hover:underline text-xs mr-2">View</button>
                                        <button onclick="configureDevice('SM-012')" class="text-green-600 hover:underline text-xs">Config</button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4"><input type="checkbox" class="rounded"></td>
                                    <td class="px-6 py-4 text-sm font-medium">CAM-015</td>
                                    <td class="px-6 py-4 text-sm">📹 Security Camera</td>
                                    <td class="px-6 py-4 text-sm">Green Valley Farm</td>
                                    <td class="px-6 py-4 text-sm">Main Gate</td>
                                    <td class="px-6 py-4 text-sm"><span class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs">Maintenance</span></td>
                                    <td class="px-6 py-4 text-sm">N/A</td>
                                    <td class="px-6 py-4 text-sm">Scheduled</td>
                                    <td class="px-6 py-4 text-sm">
                                        <button onclick="viewDeviceDetails('CAM-015')" class="text-blue-600 hover:underline text-xs mr-2">View</button>
                                        <button onclick="completeMaintenance('CAM-015')" class="text-green-600 hover:underline text-xs mr-2">Complete</button>
                                        <button onclick="configureDevice('CAM-015')" class="text-purple-600 hover:underline text-xs">Config</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
<!-- Admin Irrigation Section -->
                <div id="adminIrrigationSection" class="admin-section hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">💧 Global Irrigation Scheduling</h2>
                        <div class="flex space-x-3">
                            <button onclick="showModal('scheduleIrrigationModal')" class="bg-agri-blue text-white px-4 py-2 rounded-md hover:bg-blue-600">💧 Schedule Irrigation</button>
                            <button onclick="bulkIrrigationAction()" class="bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700">🌊 Bulk Schedule</button>
                            <button onclick="exportIrrigationData()" class="bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700">📊 Export</button>
                        </div>
                    </div>
                    
                    <!-- Irrigation Overview Cards -->
                    <div class="grid grid-cols-1 md:grid-cols-5 gap-6 mb-8">
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-sm font-medium text-gray-600">Active Systems</h3>
                                <span class="text-agri-blue">💧</span>
                            </div>
                            <div class="text-3xl font-bold text-gray-800">24</div>
                            <p class="text-xs text-blue-600 mt-1">Across all farms</p>
                        </div>
                        
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-sm font-medium text-gray-600">Currently Running</h3>
                                <span class="text-green-500">🟢</span>
                            </div>
                            <div class="text-3xl font-bold text-gray-800">3</div>
                            <p class="text-xs text-green-600 mt-1">In progress</p>
                        </div>
                        
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-sm font-medium text-gray-600">Scheduled Today</h3>
                                <span class="text-orange-500">📅</span>
                            </div>
                            <div class="text-3xl font-bold text-gray-800">8</div>
                            <p class="text-xs text-orange-600 mt-1">Remaining</p>
                        </div>
                        
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-sm font-medium text-gray-600">Water Usage Today</h3>
                                <span class="text-blue-500">🌊</span>
                            </div>
                            <div class="text-3xl font-bold text-gray-800">2,450L</div>
                            <p class="text-xs text-blue-600 mt-1">15% below target</p>
                        </div>
                        
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-sm font-medium text-gray-600">System Alerts</h3>
                                <span class="text-red-500">⚠️</span>
                            </div>
                            <div class="text-3xl font-bold text-gray-800">2</div>
                            <p class="text-xs text-red-600 mt-1">Need attention</p>
                        </div>
                    </div>

                    <!-- Current Irrigation Status -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">🌊 Currently Running</h3>
                            <div class="space-y-4">
                                <div class="flex items-center justify-between p-4 bg-green-50 border border-green-200 rounded">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-3 h-3 bg-green-500 rounded-full animate-pulse"></div>
                                        <div>
                                            <p class="font-medium text-sm">Green Valley Farm - Field A</p>
                                            <p class="text-xs text-gray-600">Started: 6:00 AM • Duration: 45 min</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="font-bold text-sm text-green-600">Running</p>
                                        <p class="text-xs text-gray-600">25 min left</p>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between p-4 bg-green-50 border border-green-200 rounded">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-3 h-3 bg-green-500 rounded-full animate-pulse"></div>
                                        <div>
                                            <p class="font-medium text-sm">Prairie Fields - Field C</p>
                                            <p class="text-xs text-gray-600">Started: 6:30 AM • Duration: 30 min</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="font-bold text-sm text-green-600">Running</p>
                                        <p class="text-xs text-gray-600">5 min left</p>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between p-4 bg-blue-50 border border-blue-200 rounded">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-3 h-3 bg-blue-500 rounded-full"></div>
                                        <div>
                                            <p class="font-medium text-sm">Sunrise Ranch - Greenhouse 1</p>
                                            <p class="text-xs text-gray-600">Scheduled: 8:00 AM • Duration: 20 min</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="font-bold text-sm text-blue-600">Queued</p>
                                        <p class="text-xs text-gray-600">Starting soon</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Irrigation Alerts -->
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">⚠️ System Alerts</h3>
                            <div class="space-y-3">
                                <div class="p-4 bg-red-50 border border-red-200 rounded">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="font-medium text-red-800">Low Water Pressure</span>
                                        <span class="bg-red-200 text-red-800 px-2 py-1 rounded-full text-xs">CRITICAL</span>
                                    </div>
                                    <p class="text-sm text-red-700">Green Valley Farm - Zone 3 - Pressure below 2.5 bar</p>
                                    <button onclick="fixPressureIssue('zone-3')" class="text-xs text-red-600 hover:underline mt-2">Investigate</button>
                                </div>
                                <div class="p-4 bg-yellow-50 border border-yellow-200 rounded">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="font-medium text-yellow-800">Filter Maintenance</span>
                                        <span class="bg-yellow-200 text-yellow-800 px-2 py-1 rounded-full text-xs">DUE</span>
                                    </div>
                                    <p class="text-sm text-yellow-700">Prairie Fields - Main filter due for cleaning</p>
                                    <button onclick="scheduleFilterMaintenance()" class="text-xs text-yellow-600 hover:underline mt-2">Schedule</button>
                                </div>
                                <div class="p-4 bg-blue-50 border border-blue-200 rounded">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="font-medium text-blue-800">Weather Advisory</span>
                                        <span class="bg-blue-200 text-blue-800 px-2 py-1 rounded-full text-xs">INFO</span>
                                    </div>
                                    <p class="text-sm text-blue-700">Rain expected tomorrow - Consider adjusting schedules</p>
                                    <button onclick="adjustForWeather()" class="text-xs text-blue-600 hover:underline mt-2">Auto-Adjust</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Irrigation Schedule Table -->
                    <div class="bg-white rounded-lg shadow-sm border overflow-hidden">
                        <div class="p-4 border-b">
                            <div class="flex space-x-4">
                                <input type="text" placeholder="Search schedules..." class="flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm">
                                <select class="px-3 py-2 border border-gray-300 rounded-md text-sm">
                                    <option>All Farms</option>
                                    <option>Green Valley Farm</option>
                                    <option>Sunrise Ranch</option>
                                    <option>Prairie Fields</option>
                                </select>
                                <select class="px-3 py-2 border border-gray-300 rounded-md text-sm">
                                    <option>All Status</option>
                                    <option>Running</option>
                                    <option>Scheduled</option>
                                    <option>Completed</option>
                                    <option>Cancelled</option>
                                </select>
                                <input type="date" class="px-3 py-2 border border-gray-300 rounded-md text-sm">
                            </div>
                        </div>
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">
                                        <input type="checkbox" class="rounded">
                                    </th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100">Farm/Field ↕️</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100">Schedule ↕️</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100">Duration ↕️</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100">Water Amount ↕️</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100">Status ↕️</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100">Progress ↕️</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-200">
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4"><input type="checkbox" class="rounded"></td>
                                    <td class="px-6 py-4 text-sm font-medium">Green Valley - Field A</td>
                                    <td class="px-6 py-4 text-sm">Today 6:00 AM</td>
                                    <td class="px-6 py-4 text-sm">45 min</td>
                                    <td class="px-6 py-4 text-sm">800L</td>
                                    <td class="px-6 py-4 text-sm"><span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs">Running</span></td>
                                    <td class="px-6 py-4 text-sm">
                                        <div class="w-full bg-gray-200 rounded-full h-2">
                                            <div class="bg-green-500 h-2 rounded-full" style="width: 65%"></div>
                                        </div>
                                        <span class="text-xs text-gray-600">65%</span>
                                    </td>
                                    <td class="px-6 py-4 text-sm">
                                        <button onclick="stopIrrigation('field-a')" class="text-red-600 hover:underline text-xs mr-2">Stop</button>
                                        <button onclick="viewIrrigationDetails('field-a')" class="text-blue-600 hover:underline text-xs">Details</button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4"><input type="checkbox" class="rounded"></td>
                                    <td class="px-6 py-4 text-sm font-medium">Prairie Fields - Field C</td>
                                    <td class="px-6 py-4 text-sm">Today 6:30 AM</td>
                                    <td class="px-6 py-4 text-sm">30 min</td>
                                    <td class="px-6 py-4 text-sm">600L</td>
                                    <td class="px-6 py-4 text-sm"><span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs">Running</span></td>
                                    <td class="px-6 py-4 text-sm">
                                        <div class="w-full bg-gray-200 rounded-full h-2">
                                            <div class="bg-green-500 h-2 rounded-full" style="width: 85%"></div>
                                        </div>
                                        <span class="text-xs text-gray-600">85%</span>
                                    </td>
                                    <td class="px-6 py-4 text-sm">
                                        <button onclick="stopIrrigation('field-c')" class="text-red-600 hover:underline text-xs mr-2">Stop</button>
                                        <button onclick="viewIrrigationDetails('field-c')" class="text-blue-600 hover:underline text-xs">Details</button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4"><input type="checkbox" class="rounded"></td>
                                    <td class="px-6 py-4 text-sm font-medium">Sunrise Ranch - Greenhouse 1</td>
                                    <td class="px-6 py-4 text-sm">Today 8:00 AM</td>
                                    <td class="px-6 py-4 text-sm">20 min</td>
                                    <td class="px-6 py-4 text-sm">300L</td>
                                    <td class="px-6 py-4 text-sm"><span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs">Scheduled</span></td>
                                    <td class="px-6 py-4 text-sm">
                                        <div class="w-full bg-gray-200 rounded-full h-2">
                                            <div class="bg-blue-500 h-2 rounded-full" style="width: 0%"></div>
                                        </div>
                                        <span class="text-xs text-gray-600">Pending</span>
                                    </td>
                                    <td class="px-6 py-4 text-sm">
                                        <button onclick="startEarlyIrrigation('greenhouse-1')" class="text-green-600 hover:underline text-xs mr-2">Start Now</button>
                                        <button onclick="editIrrigationSchedule('greenhouse-1')" class="text-blue-600 hover:underline text-xs mr-2">Edit</button>
                                        <button onclick="cancelIrrigation('greenhouse-1')" class="text-red-600 hover:underline text-xs">Cancel</button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4"><input type="checkbox" class="rounded"></td>
                                    <td class="px-6 py-4 text-sm font-medium">Green Valley - Field B</td>
                                    <td class="px-6 py-4 text-sm">Today 10:00 AM</td>
                                    <td class="px-6 py-4 text-sm">35 min</td>
                                    <td class="px-6 py-4 text-sm">700L</td>
                                    <td class="px-6 py-4 text-sm"><span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs">Scheduled</span></td>
                                    <td class="px-6 py-4 text-sm">
                                        <div class="w-full bg-gray-200 rounded-full h-2">
                                            <div class="bg-blue-500 h-2 rounded-full" style="width: 0%"></div>
                                        </div>
                                        <span class="text-xs text-gray-600">Pending</span>
                                    </td>
                                    <td class="px-6 py-4 text-sm">
                                        <button onclick="startEarlyIrrigation('field-b')" class="text-green-600 hover:underline text-xs mr-2">Start Now</button>
                                        <button onclick="editIrrigationSchedule('field-b')" class="text-blue-600 hover:underline text-xs mr-2">Edit</button>
                                        <button onclick="cancelIrrigation('field-b')" class="text-red-600 hover:underline text-xs">Cancel</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

<!-- Admin Weather Section -->
                <div id="adminWeatherSection" class="admin-section hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">🌤️ Weather & Forecast Management</h2>
                        <div class="flex space-x-3">
                            <button onclick="refreshWeatherData()" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700">🔄 Refresh Data</button>
                            <button onclick="configureWeatherAlerts()" class="bg-yellow-600 text-white px-4 py-2 rounded-md hover:bg-yellow-700">⚠️ Configure Alerts</button>
                            <button onclick="exportWeatherData()" class="bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700">📊 Export</button>
                        </div>
                    </div>
                    
                    <!-- Weather Overview Cards -->
                    <div class="grid grid-cols-1 md:grid-cols-5 gap-6 mb-8">
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-sm font-medium text-gray-600">Weather Stations</h3>
                                <span class="text-blue-500">🌡️</span>
                            </div>
                            <div class="text-3xl font-bold text-gray-800">12</div>
                            <p class="text-xs text-blue-600 mt-1">All operational</p>
                        </div>
                        
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-sm font-medium text-gray-600">Active Alerts</h3>
                                <span class="text-red-500">🚨</span>
                            </div>
                            <div class="text-3xl font-bold text-gray-800">3</div>
                            <p class="text-xs text-red-600 mt-1">Require attention</p>
                        </div>
                        
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-sm font-medium text-gray-600">Avg Temperature</h3>
                                <span class="text-orange-500">🌡️</span>
                            </div>
                            <div class="text-3xl font-bold text-gray-800">22°C</div>
                            <p class="text-xs text-green-600 mt-1">Optimal range</p>
                        </div>
                        
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-sm font-medium text-gray-600">Rainfall Today</h3>
                                <span class="text-blue-500">🌧️</span>
                            </div>
                            <div class="text-3xl font-bold text-gray-800">0mm</div>
                            <p class="text-xs text-gray-600 mt-1">Clear skies</p>
                        </div>
                        
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-sm font-medium text-gray-600">Wind Speed</h3>
                                <span class="text-green-500">💨</span>
                            </div>
                            <div class="text-3xl font-bold text-gray-800">12 km/h</div>
                            <p class="text-xs text-green-600 mt-1">Light breeze</p>
                        </div>
                    </div>

                    <!-- Weather by Farm Location -->
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8">
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-lg font-semibold text-gray-800">🏡 Green Valley Farm</h3>
                                <span class="text-4xl">☀️</span>
                            </div>
                            <div class="text-center mb-4">
                                <div class="text-3xl font-bold text-gray-800">24°C</div>
                                <p class="text-sm text-gray-600">Sunny, Clear skies</p>
                            </div>
                            <div class="space-y-2 text-sm">
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Humidity:</span>
                                    <span class="font-medium">68%</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Wind:</span>
                                    <span class="font-medium">8 km/h NE</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Pressure:</span>
                                    <span class="font-medium">1013 hPa</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">UV Index:</span>
                                    <span class="font-medium text-orange-600">6 (High)</span>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-lg font-semibold text-gray-800">🌾 Prairie Fields</h3>
                                <span class="text-4xl">⛅</span>
                            </div>
                            <div class="text-center mb-4">
                                <div class="text-3xl font-bold text-gray-800">21°C</div>
                                <p class="text-sm text-gray-600">Partly cloudy</p>
                            </div>
                            <div class="space-y-2 text-sm">
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Humidity:</span>
                                    <span class="font-medium">72%</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Wind:</span>
                                    <span class="font-medium">15 km/h SW</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Pressure:</span>
                                    <span class="font-medium">1010 hPa</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">UV Index:</span>
                                    <span class="font-medium text-yellow-600">4 (Moderate)</span>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-lg font-semibold text-gray-800">🐄 Sunrise Ranch</h3>
                                <span class="text-4xl">🌧️</span>
                            </div>
                            <div class="text-center mb-4">
                                <div class="text-3xl font-bold text-gray-800">19°C</div>
                                <p class="text-sm text-gray-600">Light rain expected</p>
                            </div>
                            <div class="space-y-2 text-sm">
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Humidity:</span>
                                    <span class="font-medium">85%</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Wind:</span>
                                    <span class="font-medium">18 km/h W</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Pressure:</span>
                                    <span class="font-medium">1008 hPa</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Rain Chance:</span>
                                    <span class="font-medium text-blue-600">75%</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Weather Alerts and 7-Day Forecast -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                        <!-- Weather Alerts -->
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">🚨 Weather Alerts</h3>
                            <div class="space-y-3">
                                <div class="p-4 bg-red-50 border border-red-200 rounded">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="font-medium text-red-800">Frost Warning</span>
                                        <span class="bg-red-200 text-red-800 px-2 py-1 rounded-full text-xs">CRITICAL</span>
                                    </div>
                                    <p class="text-sm text-red-700">Prairie Fields - Temperature dropping to -2°C tonight</p>
                                    <p class="text-xs text-gray-600 mt-1">Protect sensitive crops • Valid until 8:00 AM</p>
                                    <button onclick="activateFrostProtection()" class="text-xs text-red-600 hover:underline mt-2">Activate Protection</button>
                                </div>
                                <div class="p-4 bg-yellow-50 border border-yellow-200 rounded">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="font-medium text-yellow-800">High Wind Advisory</span>
                                        <span class="bg-yellow-200 text-yellow-800 px-2 py-1 rounded-full text-xs">MODERATE</span>
                                    </div>
                                    <p class="text-sm text-yellow-700">All farms - Winds up to 45 km/h expected</p>
                                    <p class="text-xs text-gray-600 mt-1">Secure equipment • Valid 2:00 PM - 8:00 PM</p>
                                    <button onclick="secureEquipment()" class="text-xs text-yellow-600 hover:underline mt-2">Send Alert</button>
                                </div>
                                <div class="p-4 bg-blue-50 border border-blue-200 rounded">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="font-medium text-blue-800">Heavy Rain Forecast</span>
                                        <span class="bg-blue-200 text-blue-800 px-2 py-1 rounded-full text-xs">INFO</span>
                                    </div>
                                    <p class="text-sm text-blue-700">Sunrise Ranch - 25mm rain expected tomorrow</p>
                                    <p class="text-xs text-gray-600 mt-1">Adjust irrigation schedules</p>
                                    <button onclick="adjustForWeather()" class="text-xs text-blue-600 hover:underline mt-2">Auto-Adjust</button>
                                </div>
                            </div>
                        </div>

                        <!-- 7-Day Forecast -->
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">📅 7-Day Forecast</h3>
                            <div class="space-y-3">
                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">☀️</span>
                                        <div>
                                            <p class="font-medium text-sm">Today</p>
                                            <p class="text-xs text-gray-600">Clear skies</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="font-bold">24°C / 12°C</p>
                                        <p class="text-xs text-gray-600">0% rain</p>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">⛅</span>
                                        <div>
                                            <p class="font-medium text-sm">Tomorrow</p>
                                            <p class="text-xs text-gray-600">Partly cloudy</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="font-bold">22°C / 10°C</p>
                                        <p class="text-xs text-gray-600">20% rain</p>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">🌧️</span>
                                        <div>
                                            <p class="font-medium text-sm">Wednesday</p>
                                            <p class="text-xs text-gray-600">Heavy rain</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="font-bold">18°C / 8°C</p>
                                        <p class="text-xs text-blue-600">75% rain</p>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">⛅</span>
                                        <div>
                                            <p class="font-medium text-sm">Thursday</p>
                                            <p class="text-xs text-gray-600">Clearing up</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="font-bold">20°C / 9°C</p>
                                        <p class="text-xs text-gray-600">10% rain</p>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">☀️</span>
                                        <div>
                                            <p class="font-medium text-sm">Friday</p>
                                            <p class="text-xs text-gray-600">Sunny</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="font-bold">25°C / 11°C</p>
                                        <p class="text-xs text-gray-600">0% rain</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Historical Weather Data Table -->
                    <div class="bg-white rounded-lg shadow-sm border overflow-hidden">
                        <div class="p-4 border-b">
                            <div class="flex justify-between items-center">
                                <h3 class="text-lg font-semibold text-gray-800">📊 Historical Weather Data</h3>
                                <div class="flex space-x-4">
                                    <select class="px-3 py-2 border border-gray-300 rounded-md text-sm">
                                        <option>All Farms</option>
                                        <option>Green Valley Farm</option>
                                        <option>Prairie Fields</option>
                                        <option>Sunrise Ranch</option>
                                    </select>
                                    <select class="px-3 py-2 border border-gray-300 rounded-md text-sm">
                                        <option>Last 7 days</option>
                                        <option>Last 30 days</option>
                                        <option>Last 3 months</option>
                                        <option>Last year</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100">Date ↕️</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100">Farm ↕️</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100">Temp (°C) ↕️</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100">Humidity (%) ↕️</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100">Rainfall (mm) ↕️</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100">Wind (km/h) ↕️</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100">Conditions ↕️</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-200">
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4 text-sm font-medium">Today</td>
                                    <td class="px-6 py-4 text-sm">Green Valley Farm</td>
                                    <td class="px-6 py-4 text-sm">24° / 12°</td>
                                    <td class="px-6 py-4 text-sm">68%</td>
                                    <td class="px-6 py-4 text-sm">0</td>
                                    <td class="px-6 py-4 text-sm">8 NE</td>
                                    <td class="px-6 py-4 text-sm">☀️ Sunny</td>
                                </tr>
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4 text-sm font-medium">Yesterday</td>
                                    <td class="px-6 py-4 text-sm">Green Valley Farm</td>
                                    <td class="px-6 py-4 text-sm">23° / 11°</td>
                                    <td class="px-6 py-4 text-sm">65%</td>
                                    <td class="px-6 py-4 text-sm">0</td>
                                    <td class="px-6 py-4 text-sm">12 E</td>
                                    <td class="px-6 py-4 text-sm">☀️ Clear</td>
                                </tr>
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4 text-sm font-medium">2 days ago</td>
                                    <td class="px-6 py-4 text-sm">Prairie Fields</td>
                                    <td class="px-6 py-4 text-sm">19° / 8°</td>
                                    <td class="px-6 py-4 text-sm">78%</td>
                                    <td class="px-6 py-4 text-sm">5.2</td>
                                    <td class="px-6 py-4 text-sm">15 SW</td>
                                    <td class="px-6 py-4 text-sm">🌧️ Light rain</td>
                                </tr>
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4 text-sm font-medium">3 days ago</td>
                                    <td class="px-6 py-4 text-sm">Sunrise Ranch</td>
                                    <td class="px-6 py-4 text-sm">21° / 9°</td>
                                    <td class="px-6 py-4 text-sm">72%</td>
                                    <td class="px-6 py-4 text-sm">0</td>
                                    <td class="px-6 py-4 text-sm">10 N</td>
                                    <td class="px-6 py-4 text-sm">⛅ Partly cloudy</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
<!-- Admin Reports Section -->
                <div id="adminReportsSection" class="admin-section hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">📈 Global Reports & Analytics</h2>
                        <div class="flex space-x-3">
                            <button onclick="generateCustomReport()" class="bg-purple-600 text-white px-4 py-2 rounded-md hover:bg-purple-700">📊 Custom Report</button>
                            <button onclick="scheduleReport()" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700">⏰ Schedule Report</button>
                            <button onclick="exportAllReports()" class="bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700">📄 Export All</button>
                        </div>
                    </div>
                    
                    <!-- Analytics Overview Cards -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-sm font-medium text-gray-600">Total Revenue</h3>
                                <span class="text-green-500">💰</span>
                            </div>
                            <div class="text-3xl font-bold text-gray-800">$542K</div>
                            <p class="text-xs text-green-600 mt-1">↗️ +12% vs last month</p>
                        </div>
                        
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-sm font-medium text-gray-600">Production Volume</h3>
                                <span class="text-blue-500">📦</span>
                            </div>
                            <div class="text-3xl font-bold text-gray-800">1,247T</div>
                            <p class="text-xs text-blue-600 mt-1">↗️ +8% vs last month</p>
                        </div>
                        
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-sm font-medium text-gray-600">Operational Costs</h3>
                                <span class="text-red-500">💸</span>
                            </div>
                            <div class="text-3xl font-bold text-gray-800">$187K</div>
                            <p class="text-xs text-green-600 mt-1">↘️ -5% vs last month</p>
                        </div>
                        
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-sm font-medium text-gray-600">Efficiency Score</h3>
                                <span class="text-purple-500">⚡</span>
                            </div>
                            <div class="text-3xl font-bold text-gray-800">92%</div>
                            <p class="text-xs text-purple-600 mt-1">↗️ +3% vs last month</p>
                        </div>
                    </div>

                    <!-- Report Categories -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                        <!-- Production Reports -->
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">🌾 Production Reports</h3>
                            <div class="space-y-3">
                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded hover:bg-gray-100 cursor-pointer" onclick="generateProductionReport('crop-yield')">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">📈</span>
                                        <div>
                                            <p class="font-medium text-sm">Crop Yield Analysis</p>
                                            <p class="text-xs text-gray-600">Yield trends across all farms</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="text-xs text-gray-500">Last updated</p>
                                        <p class="text-xs font-medium">2 hours ago</p>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded hover:bg-gray-100 cursor-pointer" onclick="generateProductionReport('livestock-performance')">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">🐄</span>
                                        <div>
                                            <p class="font-medium text-sm">Livestock Performance</p>
                                            <p class="text-xs text-gray-600">Health, breeding, production metrics</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="text-xs text-gray-500">Last updated</p>
                                        <p class="text-xs font-medium">1 day ago</p>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded hover:bg-gray-100 cursor-pointer" onclick="generateProductionReport('resource-utilization')">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">⚡</span>
                                        <div>
                                            <p class="font-medium text-sm">Resource Utilization</p>
                                            <p class="text-xs text-gray-600">Water, energy, equipment usage</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="text-xs text-gray-500">Last updated</p>
                                        <p class="text-xs font-medium">6 hours ago</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Financial Reports -->
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">💰 Financial Reports</h3>
                            <div class="space-y-3">
                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded hover:bg-gray-100 cursor-pointer" onclick="generateFinancialReport('profit-loss')">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">📊</span>
                                        <div>
                                            <p class="font-medium text-sm">Profit & Loss Statement</p>
                                            <p class="text-xs text-gray-600">Revenue, costs, net income</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="text-xs text-gray-500">Last updated</p>
                                        <p class="text-xs font-medium">Today</p>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded hover:bg-gray-100 cursor-pointer" onclick="generateFinancialReport('cost-analysis')">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">💸</span>
                                        <div>
                                            <p class="font-medium text-sm">Cost Analysis</p>
                                            <p class="text-xs text-gray-600">Operational expenses breakdown</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="text-xs text-gray-500">Last updated</p>
                                        <p class="text-xs font-medium">Today</p>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded hover:bg-gray-100 cursor-pointer" onclick="generateFinancialReport('roi-analysis')">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">📈</span>
                                        <div>
                                            <p class="font-medium text-sm">ROI Analysis</p>
                                            <p class="text-xs text-gray-600">Return on investment metrics</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="text-xs text-gray-500">Last updated</p>
                                        <p class="text-xs font-medium">Yesterday</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Operational Reports -->
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">⚙️ Operational Reports</h3>
                            <div class="space-y-3">
                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded hover:bg-gray-100 cursor-pointer" onclick="generateOperationalReport('iot-performance')">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">📡</span>
                                        <div>
                                            <p class="font-medium text-sm">IoT System Performance</p>
                                            <p class="text-xs text-gray-600">Device uptime, data quality</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="text-xs text-gray-500">Last updated</p>
                                        <p class="text-xs font-medium">30 min ago</p>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded hover:bg-gray-100 cursor-pointer" onclick="generateOperationalReport('maintenance-schedule')">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">🔧</span>
                                        <div>
                                            <p class="font-medium text-sm">Maintenance Schedule</p>
                                            <p class="text-xs text-gray-600">Equipment maintenance tracking</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="text-xs text-gray-500">Last updated</p>
                                        <p class="text-xs font-medium">4 hours ago</p>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded hover:bg-gray-100 cursor-pointer" onclick="generateOperationalReport('staff-productivity')">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">👥</span>
                                        <div>
                                            <p class="font-medium text-sm">Staff Productivity</p>
                                            <p class="text-xs text-gray-600">Task completion, efficiency</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="text-xs text-gray-500">Last updated</p>
                                        <p class="text-xs font-medium">1 day ago</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Environmental Reports -->
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">🌍 Environmental Reports</h3>
                            <div class="space-y-3">
                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded hover:bg-gray-100 cursor-pointer" onclick="generateEnvironmentalReport('sustainability')">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">🌱</span>
                                        <div>
                                            <p class="font-medium text-sm">Sustainability Metrics</p>
                                            <p class="text-xs text-gray-600">Carbon footprint, resource efficiency</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="text-xs text-gray-500">Last updated</p>
                                        <p class="text-xs font-medium">1 week ago</p>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded hover:bg-gray-100 cursor-pointer" onclick="generateEnvironmentalReport('water-usage')">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">💧</span>
                                        <div>
                                            <p class="font-medium text-sm">Water Usage Analysis</p>
                                            <p class="text-xs text-gray-600">Consumption patterns, efficiency</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="text-xs text-gray-500">Last updated</p>
                                        <p class="text-xs font-medium">2 days ago</p>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded hover:bg-gray-100 cursor-pointer" onclick="generateEnvironmentalReport('soil-health')">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">🌾</span>
                                        <div>
                                            <p class="font-medium text-sm">Soil Health Report</p>
                                            <p class="text-xs text-gray-600">pH, nutrients, organic matter</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="text-xs text-gray-500">Last updated</p>
                                        <p class="text-xs font-medium">3 days ago</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Reports Table -->
                    <div class="bg-white rounded-lg shadow-sm border overflow-hidden">
                        <div class="p-4 border-b">
                            <div class="flex justify-between items-center">
                                <h3 class="text-lg font-semibold text-gray-800">📋 Recent Reports</h3>
                                <div class="flex space-x-4">
                                    <select class="px-3 py-2 border border-gray-300 rounded-md text-sm">
                                        <option>All Categories</option>
                                        <option>Production</option>
                                        <option>Financial</option>
                                        <option>Operational</option>
                                        <option>Environmental</option>
                                    </select>
                                    <select class="px-3 py-2 border border-gray-300 rounded-md text-sm">
                                        <option>Last 30 days</option>
                                        <option>Last 7 days</option>
                                        <option>Last 3 months</option>
                                        <option>Last year</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100">Report Name ↕️</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100">Category ↕️</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100">Generated ↕️</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100">Generated By ↕️</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100">Status ↕️</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-200">
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4 text-sm font-medium">Monthly Production Summary</td>
                                    <td class="px-6 py-4 text-sm">Production</td>
                                    <td class="px-6 py-4 text-sm">Today 9:00 AM</td>
                                    <td class="px-6 py-4 text-sm">System Auto</td>
                                    <td class="px-6 py-4 text-sm"><span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs">Complete</span></td>
                                    <td class="px-6 py-4 text-sm">
                                        <button onclick="viewReport('monthly-production')" class="text-blue-600 hover:underline text-xs mr-2">View</button>
                                        <button onclick="downloadReport('monthly-production')" class="text-green-600 hover:underline text-xs mr-2">Download</button>
                                        <button onclick="shareReport('monthly-production')" class="text-purple-600 hover:underline text-xs">Share</button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4 text-sm font-medium">IoT System Health Check</td>
                                    <td class="px-6 py-4 text-sm">Operational</td>
                                    <td class="px-6 py-4 text-sm">Today 6:00 AM</td>
                                    <td class="px-6 py-4 text-sm">System Auto</td>
                                    <td class="px-6 py-4 text-sm"><span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs">Complete</span></td>
                                    <td class="px-6 py-4 text-sm">
                                        <button onclick="viewReport('iot-health')" class="text-blue-600 hover:underline text-xs mr-2">View</button>
                                        <button onclick="downloadReport('iot-health')" class="text-green-600 hover:underline text-xs mr-2">Download</button>
                                        <button onclick="shareReport('iot-health')" class="text-purple-600 hover:underline text-xs">Share</button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4 text-sm font-medium">Financial Performance Q1</td>
                                    <td class="px-6 py-4 text-sm">Financial</td>
                                    <td class="px-6 py-4 text-sm">Yesterday 3:00 PM</td>
                                    <td class="px-6 py-4 text-sm">Admin User</td>
                                    <td class="px-6 py-4 text-sm"><span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs">Processing</span></td>
                                    <td class="px-6 py-4 text-sm">
                                        <button onclick="viewReport('financial-q1')" class="text-blue-600 hover:underline text-xs mr-2">View</button>
                                        <button onclick="cancelReport('financial-q1')" class="text-red-600 hover:underline text-xs">Cancel</button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4 text-sm font-medium">Sustainability Assessment</td>
                                    <td class="px-6 py-4 text-sm">Environmental</td>
                                    <td class="px-6 py-4 text-sm">2 days ago</td>
                                    <td class="px-6 py-4 text-sm">Admin User</td>
                                    <td class="px-6 py-4 text-sm"><span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs">Complete</span></td>
                                    <td class="px-6 py-4 text-sm">
                                        <button onclick="viewReport('sustainability')" class="text-blue-600 hover:underline text-xs mr-2">View</button>
                                        <button onclick="downloadReport('sustainability')" class="text-green-600 hover:underline text-xs mr-2">Download</button>
                                        <button onclick="shareReport('sustainability')" class="text-purple-600 hover:underline text-xs">Share</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
<!-- Admin Tasks Section -->
                <div id="adminTasksSection" class="admin-section hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">✅ Global Tasks & Alerts</h2>
                        <div class="flex space-x-3">
                            <button onclick="showModal('createTaskModal')" class="bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700">➕ Create Task</button>
                            <button onclick="bulkTaskAction()" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700">📋 Bulk Actions</button>
                            <button onclick="configureAlerts()" class="bg-yellow-600 text-white px-4 py-2 rounded-md hover:bg-yellow-700">⚙️ Configure Alerts</button>
                            <button onclick="exportTasksData()" class="bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700">📊 Export</button>
                        </div>
                    </div>
                    
                    <!-- Tasks & Alerts Overview Cards -->
                    <div class="grid grid-cols-1 md:grid-cols-5 gap-6 mb-8">
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-sm font-medium text-gray-600">Total Tasks</h3>
                                <span class="text-blue-500">📋</span>
                            </div>
                            <div class="text-3xl font-bold text-gray-800">247</div>
                            <p class="text-xs text-blue-600 mt-1">Across all farms</p>
                        </div>
                        
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-sm font-medium text-gray-600">Pending Tasks</h3>
                                <span class="text-orange-500">⏳</span>
                            </div>
                            <div class="text-3xl font-bold text-gray-800">89</div>
                            <p class="text-xs text-orange-600 mt-1">Need attention</p>
                        </div>
                        
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-sm font-medium text-gray-600">Overdue Tasks</h3>
                                <span class="text-red-500">🚨</span>
                            </div>
                            <div class="text-3xl font-bold text-gray-800">12</div>
                            <p class="text-xs text-red-600 mt-1">Urgent action</p>
                        </div>
                        
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-sm font-medium text-gray-600">Completed Today</h3>
                                <span class="text-green-500">✅</span>
                            </div>
                            <div class="text-3xl font-bold text-gray-800">34</div>
                            <p class="text-xs text-green-600 mt-1">Good progress</p>
                        </div>
                        
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-sm font-medium text-gray-600">Active Alerts</h3>
                                <span class="text-purple-500">🔔</span>
                            </div>
                            <div class="text-3xl font-bold text-gray-800">18</div>
                            <p class="text-xs text-purple-600 mt-1">System notifications</p>
                        </div>
                    </div>

                    <!-- Priority Tasks and Recent Alerts -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                        <!-- High Priority Tasks -->
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">🚨 High Priority Tasks</h3>
                            <div class="space-y-3">
                                <div class="p-4 bg-red-50 border border-red-200 rounded">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="font-medium text-red-800">Emergency Repair - Irrigation System</span>
                                        <span class="bg-red-200 text-red-800 px-2 py-1 rounded-full text-xs">CRITICAL</span>
                                    </div>
                                    <p class="text-sm text-red-700">Green Valley Farm - Main irrigation line broken</p>
                                    <div class="flex justify-between items-center mt-2">
                                        <p class="text-xs text-gray-600">Assigned: Mike Technician • Due: Today 2:00 PM</p>
                                        <button onclick="viewTaskDetails('irrigation-repair')" class="text-xs text-red-600 hover:underline">View Details</button>
                                    </div>
                                </div>
                                <div class="p-4 bg-orange-50 border border-orange-200 rounded">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="font-medium text-orange-800">Livestock Health Check</span>
                                        <span class="bg-orange-200 text-orange-800 px-2 py-1 rounded-full text-xs">HIGH</span>
                                    </div>
                                    <p class="text-sm text-orange-700">Sunrise Ranch - 5 cattle showing symptoms</p>
                                    <div class="flex justify-between items-center mt-2">
                                        <p class="text-xs text-gray-600">Assigned: Sarah Vet • Due: Today 4:00 PM</p>
                                        <button onclick="viewTaskDetails('health-check')" class="text-xs text-orange-600 hover:underline">View Details</button>
                                    </div>
                                </div>
                                <div class="p-4 bg-yellow-50 border border-yellow-200 rounded">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="font-medium text-yellow-800">Crop Disease Assessment</span>
                                        <span class="bg-yellow-200 text-yellow-800 px-2 py-1 rounded-full text-xs">MEDIUM</span>
                                    </div>
                                    <p class="text-sm text-yellow-700">Prairie Fields - Possible blight in wheat field</p>
                                    <div class="flex justify-between items-center mt-2">
                                        <p class="text-xs text-gray-600">Assigned: John Farmer • Due: Tomorrow 10:00 AM</p>
                                        <button onclick="viewTaskDetails('disease-assessment')" class="text-xs text-yellow-600 hover:underline">View Details</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Recent System Alerts -->
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">🔔 Recent System Alerts</h3>
                            <div class="space-y-3 max-h-80 overflow-y-auto">
                                <div class="flex items-start space-x-3 p-3 bg-red-50 border border-red-200 rounded">
                                    <span class="text-red-500 mt-1">🚨</span>
                                    <div class="flex-1">
                                        <p class="text-sm font-medium text-red-800">Critical: Water Tank Empty</p>
                                        <p class="text-xs text-red-700">Green Valley Farm - Tank B at 2% capacity</p>
                                        <p class="text-xs text-gray-500 mt-1">5 minutes ago</p>
                                    </div>
                                    <button onclick="resolveAlert('tank-empty')" class="text-xs text-red-600 hover:underline">Resolve</button>
                                </div>
                                <div class="flex items-start space-x-3 p-3 bg-orange-50 border border-orange-200 rounded">
                                    <span class="text-orange-500 mt-1">⚠️</span>
                                    <div class="flex-1">
                                        <p class="text-sm font-medium text-orange-800">Device Offline</p>
                                        <p class="text-xs text-orange-700">Temperature sensor TEMP-012 not responding</p>
                                        <p class="text-xs text-gray-500 mt-1">15 minutes ago</p>
                                    </div>
                                    <button onclick="troubleshootDevice('TEMP-012')" class="text-xs text-orange-600 hover:underline">Fix</button>
                                </div>
                                <div class="flex items-start space-x-3 p-3 bg-yellow-50 border border-yellow-200 rounded">
                                    <span class="text-yellow-500 mt-1">⚠️</span>
                                    <div class="flex-1">
                                        <p class="text-sm font-medium text-yellow-800">Weather Alert</p>
                                        <p class="text-xs text-yellow-700">Heavy rain expected - adjust irrigation</p>
                                        <p class="text-xs text-gray-500 mt-1">1 hour ago</p>
                                    </div>
                                    <button onclick="adjustForWeather()" class="text-xs text-yellow-600 hover:underline">Adjust</button>
                                </div>
                                <div class="flex items-start space-x-3 p-3 bg-blue-50 border border-blue-200 rounded">
                                    <span class="text-blue-500 mt-1">ℹ️</span>
                                    <div class="flex-1">
                                        <p class="text-sm font-medium text-blue-800">Maintenance Reminder</p>
                                        <p class="text-xs text-blue-700">Tractor maintenance due in 3 days</p>
                                        <p class="text-xs text-gray-500 mt-1">2 hours ago</p>
                                    </div>
                                    <button onclick="scheduleMaintenanceTask('tractor')" class="text-xs text-blue-600 hover:underline">Schedule</button>
                                </div>
                                <div class="flex items-start space-x-3 p-3 bg-green-50 border border-green-200 rounded">
                                    <span class="text-green-500 mt-1">✅</span>
                                    <div class="flex-1">
                                        <p class="text-sm font-medium text-green-800">Task Completed</p>
                                        <p class="text-xs text-green-700">Field irrigation completed successfully</p>
                                        <p class="text-xs text-gray-500 mt-1">3 hours ago</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Task Categories -->
                    <div class="grid grid-cols-1 lg:grid-cols-4 gap-6 mb-8">
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">🌾 Crop Tasks</h3>
                            <div class="space-y-2">
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">Planting</span>
                                    <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs">8</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">Harvesting</span>
                                    <span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs">12</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">Pest Control</span>
                                    <span class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs">5</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">Fertilizing</span>
                                    <span class="bg-purple-100 text-purple-800 px-2 py-1 rounded-full text-xs">7</span>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">🐄 Livestock Tasks</h3>
                            <div class="space-y-2">
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">Feeding</span>
                                    <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs">15</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">Health Checks</span>
                                    <span class="bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs">6</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">Vaccinations</span>
                                    <span class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs">9</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">Breeding</span>
                                    <span class="bg-purple-100 text-purple-800 px-2 py-1 rounded-full text-xs">3</span>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">🔧 Maintenance Tasks</h3>
                            <div class="space-y-2">
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">Equipment</span>
                                    <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs">11</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">Irrigation</span>
                                    <span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs">4</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">Buildings</span>
                                    <span class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs">7</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">IoT Devices</span>
                                    <span class="bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs">8</span>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">📊 Administrative</h3>
                            <div class="space-y-2">
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">Reports</span>
                                    <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs">6</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">Compliance</span>
                                    <span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs">3</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">Training</span>
                                    <span class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs">4</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">Planning</span>
                                    <span class="bg-purple-100 text-purple-800 px-2 py-1 rounded-full text-xs">5</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Tasks Management Table -->
                    <div class="bg-white rounded-lg shadow-sm border overflow-hidden">
                        <div class="p-4 border-b">
                            <div class="flex space-x-4">
                                <input type="text" placeholder="Search tasks..." class="flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm">
                                <select class="px-3 py-2 border border-gray-300 rounded-md text-sm">
                                    <option>All Farms</option>
                                    <option>Green Valley Farm</option>
                                    <option>Sunrise Ranch</option>
                                    <option>Prairie Fields</option>
                                </select>
                                <select class="px-3 py-2 border border-gray-300 rounded-md text-sm">
                                    <option>All Categories</option>
                                    <option>Crop Tasks</option>
                                    <option>Livestock Tasks</option>
                                    <option>Maintenance</option>
                                    <option>Administrative</option>
                                </select>
                                <select class="px-3 py-2 border border-gray-300 rounded-md text-sm">
                                    <option>All Status</option>
                                    <option>Pending</option>
                                    <option>In Progress</option>
                                    <option>Completed</option>
                                    <option>Overdue</option>
                                </select>
                                <select class="px-3 py-2 border border-gray-300 rounded-md text-sm">
                                    <option>All Priorities</option>
                                    <option>Critical</option>
                                    <option>High</option>
                                    <option>Medium</option>
                                    <option>Low</option>
                                </select>
                            </div>
                        </div>
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">
                                        <input type="checkbox" class="rounded">
                                    </th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100">Task ↕️</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100">Farm ↕️</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100">Category ↕️</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100">Assigned To ↕️</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100">Priority ↕️</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100">Due Date ↕️</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100">Status ↕️</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-200">
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4"><input type="checkbox" class="rounded"></td>
                                    <td class="px-6 py-4 text-sm font-medium">Emergency Irrigation Repair</td>
                                    <td class="px-6 py-4 text-sm">Green Valley Farm</td>
                                    <td class="px-6 py-4 text-sm">Maintenance</td>
                                    <td class="px-6 py-4 text-sm">Mike Technician</td>
                                    <td class="px-6 py-4 text-sm"><span class="bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs">Critical</span></td>
                                    <td class="px-6 py-4 text-sm">Today 2:00 PM</td>
                                    <td class="px-6 py-4 text-sm"><span class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs">In Progress</span></td>
                                    <td class="px-6 py-4 text-sm">
                                        <button onclick="viewTaskDetails('irrigation-repair')" class="text-blue-600 hover:underline text-xs mr-2">View</button>
                                        <button onclick="editTask('irrigation-repair')" class="text-green-600 hover:underline text-xs mr-2">Edit</button>
                                        <button onclick="completeTask('irrigation-repair')" class="text-purple-600 hover:underline text-xs">Complete</button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4"><input type="checkbox" class="rounded"></td>
                                    <td class="px-6 py-4 text-sm font-medium">Cattle Health Inspection</td>
                                    <td class="px-6 py-4 text-sm">Sunrise Ranch</td>
                                    <td class="px-6 py-4 text-sm">Livestock</td>
                                    <td class="px-6 py-4 text-sm">Sarah Vet</td>
                                    <td class="px-6 py-4 text-sm"><span class="bg-orange-100 text-orange-800 px-2 py-1 rounded-full text-xs">High</span></td>
                                    <td class="px-6 py-4 text-sm">Today 4:00 PM</td>
                                    <td class="px-6 py-4 text-sm"><span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs">Pending</span></td>
                                    <td class="px-6 py-4 text-sm">
                                        <button onclick="viewTaskDetails('health-inspection')" class="text-blue-600 hover:underline text-xs mr-2">View</button>
                                        <button onclick="editTask('health-inspection')" class="text-green-600 hover:underline text-xs mr-2">Edit</button>
                                        <button onclick="assignTask('health-inspection')" class="text-purple-600 hover:underline text-xs">Reassign</button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4"><input type="checkbox" class="rounded"></td>
                                    <td class="px-6 py-4 text-sm font-medium">Wheat Field Harvesting</td>
                                    <td class="px-6 py-4 text-sm">Prairie Fields</td>
                                    <td class="px-6 py-4 text-sm">Crop Tasks</td>
                                    <td class="px-6 py-4 text-sm">John Farmer</td>
                                    <td class="px-6 py-4 text-sm"><span class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs">Medium</span></td>
                                    <td class="px-6 py-4 text-sm">Tomorrow 8:00 AM</td>
                                    <td class="px-6 py-4 text-sm"><span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs">Scheduled</span></td>
                                    <td class="px-6 py-4 text-sm">
                                        <button onclick="viewTaskDetails('wheat-harvest')" class="text-blue-600 hover:underline text-xs mr-2">View</button>
                                        <button onclick="editTask('wheat-harvest')" class="text-green-600 hover:underline text-xs mr-2">Edit</button>
                                        <button onclick="startTask('wheat-harvest')" class="text-green-600 hover:underline text-xs">Start</button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4"><input type="checkbox" class="rounded"></td>
                                    <td class="px-6 py-4 text-sm font-medium">Monthly Safety Report</td>
                                    <td class="px-6 py-4 text-sm">All Farms</td>
                                    <td class="px-6 py-4 text-sm">Administrative</td>
                                    <td class="px-6 py-4 text-sm">Admin User</td>
                                    <td class="px-6 py-4 text-sm"><span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs">Low</span></td>
                                    <td class="px-6 py-4 text-sm">End of Month</td>
                                    <td class="px-6 py-4 text-sm"><span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs">Completed</span></td>
                                    <td class="px-6 py-4 text-sm">
                                        <button onclick="viewTaskDetails('safety-report')" class="text-blue-600 hover:underline text-xs mr-2">View</button>
                                        <button onclick="archiveTask('safety-report')" class="text-gray-600 hover:underline text-xs">Archive</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
<!-- Admin Settings Section -->
                <div id="adminSettingsSection" class="admin-section hidden">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6">⚙️ System Settings & User Management</h2>
                    <div class="bg-white p-6 rounded-lg shadow-sm border">
                        <p class="text-gray-600">Configure system settings and manage all users.</p>
                    </div>
                
                    
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">🌐 Global Settings</h3>
                            <p class="text-gray-600 mb-4">Manage global settings for all farms and users.</p>
                            <button onclick="showModal('globalSettingsModal')" class="bg-agri-blue text-white px-4 py-2 rounded-md hover:bg-blue-600 text-sm">Configure Settings</button>
                        </div>
                        <br>
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">📊 Data Management</h3>
                            <p class="text-gray-600 mb-4">Backup, restore, and manage system data.</p>
                            <button onclick="showModal('dataManagementModal')" class="bg-agri-blue text-white px-4 py-2 rounded-md hover:bg-blue-600 text-sm">Manage Data</button>
                        </div>
                        <br>

                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <h3 class="text-lg font-semibold mb-4">👥 User Management</h3>
                            <div class="space-y-4">
                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded">
                                    <div>
                                        <p class="font-medium">John Farmer</p>
                                        <p class="text-sm text-gray-600">Farmer • john@farm.com</p>
                                    </div>
                                    <button class="text-blue-600 hover:underline text-sm">Edit</button>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded">
                                    <div>
                                        <p class="font-medium">Admin User</p>
                                        <p class="text-sm text-gray-600">Admin • admin@agrisynth.com</p>
                                    </div>
                                    <button class="text-blue-600 hover:underline text-sm">Edit</button>
                                </div>
                                <button onclick="showModal('addUserModal')" class="w-full p-3 border-2 border-dashed border-gray-300 rounded text-gray-600 hover:border-gray-400">
                                    ➕ Add New User
                                </button>
                            </div>
                        </div>
                        
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <h3 class="text-lg font-semibold mb-4">🔔 Notification Settings</h3>
                            <div class="space-y-4">
                                <div class="flex items-center justify-between">
                                    <span class="text-sm">Email Alerts</span>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" class="sr-only peer" checked>
                                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-agri-green"></div>
                                    </label>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-sm">SMS Notifications</span>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" class="sr-only peer">
                                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-agri-green"></div>
                                    </label>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-sm">Critical Alerts Only</span>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" class="sr-only peer" checked>
                                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-agri-green"></div>
                                    </label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <h3 class="text-lg font-semibold mb-4">🔐 Security Settings</h3>
                            <div class="space-y-4">
                                <button class="w-full p-3 bg-gray-100 rounded text-left hover:bg-gray-200">
                                    🔑 Change Password
                                </button>
                                <button class="w-full p-3 bg-gray-100 rounded text-left hover:bg-gray-200">
                                    📱 Two-Factor Authentication
                                </button>
                                <button class="w-full p-3 bg-gray-100 rounded text-left hover:bg-gray-200">
                                    🔒 Session Management
                                </button>
                            </div>
                        </div>
                        
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <h3 class="text-lg font-semibold mb-4">🔌 API Configuration</h3>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Weather API Key</label>
                                    <input type="password" class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm" value="••••••••••••••••">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">IoT Device Endpoint</label>
                                    <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm" value="https://api.agrisynth.com/iot">
                                </div>
                                <button class="bg-agri-blue text-white px-4 py-2 rounded-md hover:bg-blue-600 text-sm">Update Configuration</button>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>


<!-- Farmer User Dashboard -->
    <div id="dashboard" class="hidden min-h-screen bg-gray-50">
        <!-- Top Navigation -->
        <nav class="bg-white shadow-sm border-b">
            <div class="px-6 py-4 flex justify-between items-center">
                <div class="flex items-center space-x-4">
                    <h1 class="text-2xl font-bold text-gray-800">🌾 AgriSynth</h1>
                    <span id="userRole" class="px-2 py-1 bg-agri-green text-white text-xs rounded-full"></span>
                </div>
                <div class="flex items-center space-x-4">
                    <button onclick="showModal('addFarmModal')" class="bg-agri-green text-white px-4 py-2 rounded-md hover:bg-green-600 text-sm">➕ Add Farm</button>
                    <button onclick="showModal('scheduleIrrigationModal')" class="bg-agri-blue text-white px-4 py-2 rounded-md hover:bg-blue-600 text-sm">💧 Schedule Irrigation</button>
                    <button onclick="generateReport()" class="bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700 text-sm">📊 Generate Report</button>
                    <div class="relative">
                        <button id="notificationBtn" class="relative p-2 text-gray-600 hover:text-gray-800">
                            🔔
                            <span class="absolute -top-1 -right-1 bg-agri-red text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">3</span>
                        </button>
                    </div>
                    <button onclick="logout()" class="text-gray-600 hover:text-gray-800">👤 Logout</button>
                </div>
            </div>
        </nav>

        <div class="flex">
            <!-- Sidebar -->
            <aside class="w-64 bg-white shadow-sm h-screen">
                <nav class="p-4">
                    <ul class="space-y-2">
                        <li><a href="#" onclick="showSection('dashboardSection')" class="nav-link active flex items-center space-x-3 px-3 py-2 rounded-md">📊 Dashboard</a></li>
                        <li><a href="#" onclick="showSection('farmsSection')" class="nav-link flex items-center space-x-3 px-3 py-2 rounded-md">🏡 Farms</a></li>
                        <li><a href="#" onclick="showSection('cropsSection')" class="nav-link flex items-center space-x-3 px-3 py-2 rounded-md">🌱 Crops & Fields</a></li>
                        <li><a href="#" onclick="showSection('livestockSection')" class="nav-link flex items-center space-x-3 px-3 py-2 rounded-md">🐄 Livestock</a></li>
                        <li><a href="#" onclick="showSection('iotSection')" class="nav-link flex items-center space-x-3 px-3 py-2 rounded-md">📡 IoT Devices</a></li>
                        <li><a href="#" onclick="showSection('irrigationSection')" class="nav-link flex items-center space-x-3 px-3 py-2 rounded-md">💧 Irrigation</a></li>
                        <li><a href="#" onclick="showSection('weatherSection')" class="nav-link flex items-center space-x-3 px-3 py-2 rounded-md">🌤️ Weather</a></li>
                        <li><a href="#" onclick="showSection('reportsSection')" class="nav-link flex items-center space-x-3 px-3 py-2 rounded-md">📈 Reports</a></li>
                        <li><a href="#" onclick="showSection('tasksSection')" class="nav-link flex items-center space-x-3 px-3 py-2 rounded-md">✅ Tasks</a></li>
                        <li><a href="#" onclick="showSection('settingsSection')" class="nav-link flex items-center space-x-3 px-3 py-2 rounded-md">⚙️ Settings</a></li>
                    </ul>
                </nav>
            </aside>

            <!-- Main Content -->
            <main class="flex-1 p-6">
                <!-- Dashboard Section -->
                <div id="dashboardSection" class="section">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6">Farm Overview</h2>
                    
                    <!-- IoT Sensor Cards -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-sm font-medium text-gray-600">Soil Moisture</h3>
                                <span class="text-green-500">📈</span>
                            </div>
                            <div class="text-2xl font-bold text-gray-800">65%</div>
                            <p class="text-xs text-gray-500 mt-1">Field A - Normal</p>
                        </div>
                        
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-sm font-medium text-gray-600">Temperature</h3>
                                <span class="text-red-500">📈</span>
                            </div>
                            <div class="text-2xl font-bold text-gray-800">24°C</div>
                            <p class="text-xs text-gray-500 mt-1">Optimal range</p>
                        </div>
                        
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-sm font-medium text-gray-600">pH Level</h3>
                                <span class="text-green-500">➡️</span>
                            </div>
                            <div class="text-2xl font-bold text-gray-800">6.8</div>
                            <p class="text-xs text-gray-500 mt-1">Slightly acidic</p>
                        </div>
                        
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-sm font-medium text-gray-600">Humidity</h3>
                                <span class="text-blue-500">📉</span>
                            </div>
                            <div class="text-2xl font-bold text-gray-800">72%</div>
                            <p class="text-xs text-gray-500 mt-1">Good conditions</p>
                        </div>
                    </div>

                    <!-- AI Suggestions Panel -->
                    <div class="bg-gradient-to-r from-green-50 to-blue-50 p-6 rounded-lg border border-green-200 mb-8">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">🤖 AI Recommendations</h3>
                        <div class="space-y-3">
                            <div class="flex items-start space-x-3">
                                <span class="text-agri-orange">⚠️</span>
                                <div>
                                    <p class="text-sm font-medium text-gray-800">Irrigation Required</p>
                                    <p class="text-xs text-gray-600">Field A moisture dropping. Schedule irrigation for tomorrow morning.</p>
                                    <button onclick="showModal('scheduleIrrigationModal')" class="text-xs text-agri-blue hover:underline mt-1">Schedule Now</button>
                                </div>
                            </div>
                            <div class="flex items-start space-x-3">
                                <span class="text-agri-green">✅</span>
                                <div>
                                    <p class="text-sm font-medium text-gray-800">Optimal Harvest Window</p>
                                    <p class="text-xs text-gray-600">Tomatoes in Field B ready for harvest in 3-5 days.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Main Dashboard Grid -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <!-- Crops Overview -->
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">🌱 Crops Overview</h3>
                            <div class="space-y-3">
                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded">
                                    <div>
                                        <p class="font-medium text-sm">Field A - Tomatoes</p>
                                        <p class="text-xs text-gray-600">Flowering stage • Health: 85%</p>
                                    </div>
                                    <span class="text-green-500">🟢</span>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded">
                                    <div>
                                        <p class="font-medium text-sm">Field B - Corn</p>
                                        <p class="text-xs text-gray-600">Maturation • Health: 92%</p>
                                    </div>
                                    <span class="text-green-500">🟢</span>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded">
                                    <div>
                                        <p class="font-medium text-sm">Field C - Wheat</p>
                                        <p class="text-xs text-gray-600">Growth stage • Health: 78%</p>
                                    </div>
                                    <span class="text-yellow-500">🟡</span>
                                </div>
                            </div>
                        </div>

                        <!-- Weather Widget -->
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">🌤️ Weather Forecast</h3>
                            <div class="text-center mb-4">
                                <div class="text-3xl mb-2">☀️</div>
                                <div class="text-2xl font-bold">22°C</div>
                                <p class="text-sm text-gray-600">Sunny, Light breeze</p>
                            </div>
                            <div class="grid grid-cols-5 gap-2 text-center text-xs">
                                <div class="p-2">
                                    <div>Mon</div>
                                    <div class="text-lg">☀️</div>
                                    <div>24°</div>
                                </div>
                                <div class="p-2">
                                    <div>Tue</div>
                                    <div class="text-lg">⛅</div>
                                    <div>21°</div>
                                </div>
                                <div class="p-2">
                                    <div>Wed</div>
                                    <div class="text-lg">🌧️</div>
                                    <div>18°</div>
                                </div>
                                <div class="p-2">
                                    <div>Thu</div>
                                    <div class="text-lg">⛅</div>
                                    <div>20°</div>
                                </div>
                                <div class="p-2">
                                    <div>Fri</div>
                                    <div class="text-lg">☀️</div>
                                    <div>25°</div>
                                </div>
                            </div>
                            <div class="mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded">
                                <p class="text-xs text-yellow-800">⚠️ Pest Risk: Medium - Monitor for aphids due to warm weather</p>
                            </div>
                        </div>

                        <!-- Livestock Overview -->
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">🐄 Livestock Status</h3>
                            <div class="space-y-3">
                                <div class="flex items-center justify-between">
                                    <span class="text-sm">Cattle (24)</span>
                                    <span class="text-green-500">🟢 Healthy</span>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-sm">Chickens (150)</span>
                                    <span class="text-green-500">🟢 Healthy</span>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-sm">Pigs (12)</span>
                                    <span class="text-yellow-500">🟡 Vaccination Due</span>
                                </div>
                            </div>
                            <div class="mt-4 p-3 bg-blue-50 border border-blue-200 rounded">
                                <p class="text-xs text-blue-800">📅 Next feeding: Cattle - 6:00 AM, Chickens - 7:00 AM</p>
                            </div>
                        </div>
                        <!-- Recent Alerts -->
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">🔔 Recent Alerts</h3>
                            <div class="space-y-3">
                                <div class="flex items-start space-x-3 p-3 bg-red-50 border border-red-200 rounded">
                                    <span class="text-agri-red">🔴</span>
                                    <div>
                                        <p class="text-sm font-medium">Critical: Water Tank Low</p>
                                        <p class="text-xs text-gray-600">Tank B - 15% capacity remaining</p>
                                        <p class="text-xs text-gray-500">2 hours ago</p>
                                    </div>
                                </div>
                                <div class="flex items-start space-x-3 p-3 bg-orange-50 border border-orange-200 rounded">
                                    <span class="text-agri-orange">🟠</span>
                                    <div>
                                        <p class="text-sm font-medium">Device Offline</p>
                                        <p class="text-xs text-gray-600">Sensor #3 - Field C moisture sensor</p>
                                        <p class="text-xs text-gray-500">4 hours ago</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


<!-- Farms Section -->
                <div id="farmsSection" class="section hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">🏡 Farms Management</h2>
                        <button onclick="showModal('addFarmModal')" class="bg-agri-green text-white px-4 py-2 rounded-md hover:bg-green-600">➕ Add Farm</button>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <h3 class="text-lg font-semibold mb-2">Green Valley Farm</h3>
                            <p class="text-sm text-gray-600 mb-4">📍 California, USA • 150 acres</p>
                            <div class="space-y-2 text-sm">
                                <div class="flex justify-between">
                                    <span>Crops:</span>
                                    <span>Tomatoes, Corn, Wheat</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Livestock:</span>
                                    <span>186 animals</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Status:</span>
                                    <span class="text-green-600">🟢 Active</span>
                                </div>
                            </div>
                            <div class="mt-4 flex space-x-2">
                                <button class="text-xs bg-gray-100 px-3 py-1 rounded hover:bg-gray-200">Edit</button>
                                <button class="text-xs bg-blue-100 text-blue-700 px-3 py-1 rounded hover:bg-blue-200">View Map</button>
                            </div>
                        </div>
                        
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <h3 class="text-lg font-semibold mb-2">Sunrise Ranch</h3>
                            <p class="text-sm text-gray-600 mb-4">📍 Texas, USA • 200 acres</p>
                            <div class="space-y-2 text-sm">
                                <div class="flex justify-between">
                                    <span>Crops:</span>
                                    <span>Cotton, Soybeans</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Livestock:</span>
                                    <span>45 cattle</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Status:</span>
                                    <span class="text-green-600">🟢 Active</span>
                                </div>
                            </div>
                            <div class="mt-4 flex space-x-2">
                                <button class="text-xs bg-gray-100 px-3 py-1 rounded hover:bg-gray-200">Edit</button>
                                <button class="text-xs bg-blue-100 text-blue-700 px-3 py-1 rounded hover:bg-blue-200">View Map</button>
                            </div>
                        </div>
                    </div>
                </div>

<!-- Crops Section -->
                <div id="cropsSection" class="section hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">🌱 Crops & Fields</h2>
                        <button onclick="showModal('addCropModal')" class="bg-agri-green text-white px-4 py-2 rounded-md hover:bg-green-600">➕ Add Crop</button>
                    </div>
                    
                    <div class="bg-white rounded-lg shadow-sm border overflow-hidden">
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Field ID</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Crop</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Growth Stage</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Last Irrigation</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Health Index</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">AI Recommendation</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-200">
                                <tr>
                                    <td class="px-6 py-4 text-sm">Field-A</td>
                                    <td class="px-6 py-4 text-sm">🍅 Tomatoes</td>
                                    <td class="px-6 py-4 text-sm">Flowering</td>
                                    <td class="px-6 py-4 text-sm">2 days ago</td>
                                    <td class="px-6 py-4 text-sm"><span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs">85%</span></td>
                                    <td class="px-6 py-4 text-sm text-agri-orange">Irrigation needed tomorrow</td>
                                    <td class="px-6 py-4 text-sm">
                                        <button onclick="showModal('updateCropModal')" class="text-blue-600 hover:underline text-xs">Update</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="px-6 py-4 text-sm">Field-B</td>
                                    <td class="px-6 py-4 text-sm">🌽 Corn</td>
                                    <td class="px-6 py-4 text-sm">Maturation</td>
                                    <td class="px-6 py-4 text-sm">1 day ago</td>
                                    <td class="px-6 py-4 text-sm"><span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs">92%</span></td>
                                    <td class="px-6 py-4 text-sm text-green-600">Ready for harvest in 3-5 days</td>
                                    <td class="px-6 py-4 text-sm">
                                        <button onclick="showModal('updateCropModal')" class="text-blue-600 hover:underline text-xs">Update</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="px-6 py-4 text-sm">Field-C</td>
                                    <td class="px-6 py-4 text-sm">🌾 Wheat</td>
                                    <td class="px-6 py-4 text-sm">Growth</td>
                                    <td class="px-6 py-4 text-sm">3 days ago</td>
                                    <td class="px-6 py-4 text-sm"><span class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs">78%</span></td>
                                    <td class="px-6 py-4 text-sm text-agri-blue">Monitor for pests</td>
                                    <td class="px-6 py-4 text-sm">
                                        <button onclick="showModal('updateCropModal')" class="text-blue-600 hover:underline text-xs">Update</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>


                 <!-- Livestock Section -->
                <div id="livestockSection" class="section hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">🐄 Livestock Management</h2>
                        <button onclick="showModal('addLivestockModal')" class="bg-agri-green text-white px-4 py-2 rounded-md hover:bg-green-600">➕ Add Livestock</button>
                    </div>
                    
                    <div class="bg-white rounded-lg shadow-sm border overflow-hidden">
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Animal ID</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Type</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Age</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Health</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Vaccination</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Feeding Schedule</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-200">
                                <tr>
                                    <td class="px-6 py-4 text-sm">C-001</td>
                                    <td class="px-6 py-4 text-sm">🐄 Cattle</td>
                                    <td class="px-6 py-4 text-sm">3 years</td>
                                    <td class="px-6 py-4 text-sm"><span class="text-green-600">🟢 Healthy</span></td>
                                    <td class="px-6 py-4 text-sm">Up to date</td>
                                    <td class="px-6 py-4 text-sm">6:00 AM, 6:00 PM</td>
                                    <td class="px-6 py-4 text-sm">
                                        <button class="text-blue-600 hover:underline text-xs">Update</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="px-6 py-4 text-sm">P-001</td>
                                    <td class="px-6 py-4 text-sm">🐷 Pig</td>
                                    <td class="px-6 py-4 text-sm">1 year</td>
                                    <td class="px-6 py-4 text-sm"><span class="text-yellow-600">🟡 Vaccination Due</span></td>
                                    <td class="px-6 py-4 text-sm">Due in 5 days</td>
                                    <td class="px-6 py-4 text-sm">7:00 AM, 7:00 PM</td>
                                    <td class="px-6 py-4 text-sm">
                                        <button class="text-blue-600 hover:underline text-xs">Update</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="px-6 py-4 text-sm">CH-001</td>
                                    <td class="px-6 py-4 text-sm">🐔 Chicken</td>
                                    <td class="px-6 py-4 text-sm">8 months</td>
                                    <td class="px-6 py-4 text-sm"><span class="text-green-600">🟢 Healthy</span></td>
                                    <td class="px-6 py-4 text-sm">Up to date</td>
                                    <td class="px-6 py-4 text-sm">7:00 AM, 5:00 PM</td>
                                    <td class="px-6 py-4 text-sm">
                                        <button class="text-blue-600 hover:underline text-xs">Update</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>


<!-- IoT Devices Section -->
                <div id="iotSection" class="section hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">📡 IoT Devices</h2>
                        <button onclick="showModal('addDeviceModal')" class="bg-agri-green text-white px-4 py-2 rounded-md hover:bg-green-600">➕ Add Device</button>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="font-semibold">Soil Moisture Sensor</h3>
                                <span class="w-3 h-3 bg-green-500 rounded-full"></span>
                            </div>
                            <p class="text-sm text-gray-600 mb-2">Device ID: SMS-001</p>
                            <p class="text-sm text-gray-600 mb-2">Field: A</p>
                            <p class="text-sm text-gray-600">Last Sync: 2 min ago</p>
                            <div class="mt-4">
                                <button class="text-xs bg-gray-100 px-3 py-1 rounded hover:bg-gray-200">Configure</button>
                            </div>
                        </div>
                        
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="font-semibold">Temperature Sensor</h3>
                                <span class="w-3 h-3 bg-green-500 rounded-full"></span>
                            </div>
                            <p class="text-sm text-gray-600 mb-2">Device ID: TS-001</p>
                            <p class="text-sm text-gray-600 mb-2">Field: B</p>
                            <p class="text-sm text-gray-600">Last Sync: 1 min ago</p>
                            <div class="mt-4">
                                <button class="text-xs bg-gray-100 px-3 py-1 rounded hover:bg-gray-200">Configure</button>
                            </div>
                        </div>
                        
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="font-semibold">pH Sensor</h3>
                                <span class="w-3 h-3 bg-red-500 rounded-full"></span>
                            </div>
                            <p class="text-sm text-gray-600 mb-2">Device ID: PH-001</p>
                            <p class="text-sm text-gray-600 mb-2">Field: C</p>
                            <p class="text-sm text-gray-600">Last Sync: 4 hours ago</p>
                            <div class="mt-4">
                                <button class="text-xs bg-red-100 text-red-700 px-3 py-1 rounded hover:bg-red-200">Troubleshoot</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-lg shadow-sm border overflow-hidden">
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Device ID</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Type</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Status</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Last Sync</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Assigned Field</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-200">
                                <tr>
                                    <td class="px-6 py-4 text-sm">SMS-001</td>
                                    <td class="px-6 py-4 text-sm">Soil Moisture</td>
                                    <td class="px-6 py-4 text-sm"><span class="text-green-600">🟢 Active</span></td>
                                    <td class="px-6 py-4 text-sm">2 min ago</td>
                                    <td class="px-6 py-4 text-sm">Field A</td>
                                    <td class="px-6 py-4 text-sm">
                                        <button class="text-blue-600 hover:underline text-xs">Configure</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="px-6 py-4 text-sm">TS-001</td>
                                    <td class="px-6 py-4 text-sm">Temperature</td>
                                    <td class="px-6 py-4 text-sm"><span class="text-green-600">🟢 Active</span></td>
                                    <td class="px-6 py-4 text-sm">1 min ago</td>
                                    <td class="px-6 py-4 text-sm">Field B</td>
                                    <td class="px-6 py-4 text-sm">
                                        <button class="text-blue-600 hover:underline text-xs">Configure</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="px-6 py-4 text-sm">PH-001</td>
                                    <td class="px-6 py-4 text-sm">pH Sensor</td>
                                    <td class="px-6 py-4 text-sm"><span class="text-red-600">🔴 Offline</span></td>
                                    <td class="px-6 py-4 text-sm">4 hours ago</td>
                                    <td class="px-6 py-4 text-sm">Field C</td>
                                    <td class="px-6 py-4 text-sm">
                                        <button class="text-red-600 hover:underline text-xs">Troubleshoot</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

<!-- Irrigation Section -->
                <div id="irrigationSection" class="section hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">💧 Irrigation Management</h2>
                        <button onclick="showModal('scheduleIrrigationModal')" class="bg-agri-blue text-white px-4 py-2 rounded-md hover:bg-blue-600">Schedule Irrigation</button>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="font-semibold">Field A - Tomatoes</h3>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" class="sr-only peer" onchange="toggleIrrigation('A')">
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-agri-blue"></div>
                                </label>
                            </div>
                            <div class="space-y-2 text-sm">
                                <div class="flex justify-between">
                                    <span>Moisture Level:</span>
                                    <span class="text-orange-600">65% (Low)</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Last Irrigation:</span>
                                    <span>2 days ago</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Next Scheduled:</span>
                                    <span class="text-agri-blue">Tomorrow 6:00 AM</span>
                                </div>
                            </div>
                            <div class="mt-4 p-3 bg-orange-50 border border-orange-200 rounded">
                                <p class="text-xs text-orange-800">🤖 AI suggests irrigation within 12 hours</p>
                            </div>
                        </div>
                        
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="font-semibold">Field B - Corn</h3>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" class="sr-only peer" onchange="toggleIrrigation('B')">
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-agri-blue"></div>
                                </label>
                            </div>
                            <div class="space-y-2 text-sm">
                                <div class="flex justify-between">
                                    <span>Moisture Level:</span>
                                    <span class="text-green-600">82% (Good)</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Last Irrigation:</span>
                                    <span>1 day ago</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Next Scheduled:</span>
                                    <span>In 2 days</span>
                                </div>
                            </div>
                            <div class="mt-4 p-3 bg-green-50 border border-green-200 rounded">
                                <p class="text-xs text-green-800">✅ Optimal moisture levels maintained</p>
                            </div>
                        </div>
                        
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="font-semibold">Field C - Wheat</h3>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" class="sr-only peer" onchange="toggleIrrigation('C')">
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-agri-blue"></div>
                                </label>
                            </div>
                            <div class="space-y-2 text-sm">
                                <div class="flex justify-between">
                                    <span>Moisture Level:</span>
                                    <span class="text-yellow-600">75% (Moderate)</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Last Irrigation:</span>
                                    <span>3 days ago</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Next Scheduled:</span>
                                    <span>Tomorrow 8:00 AM</span>
                                </div>
                            </div>
                            <div class="mt-4 p-3 bg-blue-50 border border-blue-200 rounded">
                                <p class="text-xs text-blue-800">📊 Monitor closely - sensor offline</p>
                            </div>
                        </div>
                    </div>
                </div>

<!-- Weather Section -->
                <div id="weatherSection" class="section hidden">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6">🌤️ Weather & Forecast</h2>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <h3 class="text-lg font-semibold mb-4">Current Weather</h3>
                            <div class="text-center mb-6">
                                <div class="text-6xl mb-4">☀️</div>
                                <div class="text-4xl font-bold mb-2">22°C</div>
                                <p class="text-gray-600">Sunny with light breeze</p>
                                <p class="text-sm text-gray-500">Humidity: 72% • Wind: 8 km/h NE</p>
                            </div>
                        </div>
                        
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <h3 class="text-lg font-semibold mb-4">7-Day Forecast</h3>
                            <div class="space-y-3">
                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">☀️</span>
                                        <div>
                                            <p class="font-medium">Monday</p>
                                            <p class="text-sm text-gray-600">Sunny</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="font-medium">24°C</p>
                                        <p class="text-sm text-gray-600">15°C</p>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">⛅</span>
                                        <div>
                                            <p class="font-medium">Tuesday</p>
                                            <p class="text-sm text-gray-600">Partly Cloudy</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="font-medium">21°C</p>
                                        <p class="text-sm text-gray-600">13°C</p>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">🌧️</span>
                                        <div>
                                            <p class="font-medium">Wednesday</p>
                                            <p class="text-sm text-gray-600">Rain</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="font-medium">18°C</p>
                                        <p class="text-sm text-gray-600">12°C</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-8 grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <h3 class="text-lg font-semibold mb-4">🐛 Pest & Disease Risk</h3>
                            <div class="space-y-4">
                                <div class="p-4 bg-yellow-50 border border-yellow-200 rounded">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="font-medium text-yellow-800">Aphid Risk</span>
                                        <span class="bg-yellow-200 text-yellow-800 px-2 py-1 rounded-full text-xs">Medium</span>
                                    </div>
                                    <p class="text-sm text-yellow-700">Warm weather conditions favor aphid development. Monitor tomato plants closely.</p>
                                </div>
                                <div class="p-4 bg-green-50 border border-green-200 rounded">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="font-medium text-green-800">Fungal Disease Risk</span>
                                        <span class="bg-green-200 text-green-800 px-2 py-1 rounded-full text-xs">Low</span>
                                    </div>
                                    <p class="text-sm text-green-700">Low humidity reduces fungal disease risk. Good conditions for crop health.</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <h3 class="text-lg font-semibold mb-4">🌱 Growing Conditions</h3>
                            <div class="space-y-3">
                                <div class="flex justify-between items-center">
                                    <span class="text-sm">Temperature Range</span>
                                    <span class="text-green-600 font-medium">Optimal</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm">Humidity Level</span>
                                    <span class="text-green-600 font-medium">Good</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm">UV Index</span>
                                    <span class="text-yellow-600 font-medium">Moderate</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm">Wind Speed</span>
                                    <span class="text-green-600 font-medium">Ideal</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

  <!-- Reports Section -->
                <div id="reportsSection" class="section hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">📈 Reports & Analytics</h2>
                        <button onclick="generateReport()" class="bg-agri-green text-white px-4 py-2 rounded-md hover:bg-green-600">Generate Report</button>
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <h3 class="text-lg font-semibold mb-4">📊 Yield Forecast</h3>
                            <div class="h-64 bg-gray-50 rounded flex items-center justify-center">
                                <div class="text-center">
                                    <div class="text-4xl mb-2">📈</div>
                                    <p class="text-gray-600">Yield trending 15% above average</p>
                                    <p class="text-sm text-gray-500 mt-2">Based on current growth rates and weather patterns</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <h3 class="text-lg font-semibold mb-4">💧 Water Usage</h3>
                            <div class="h-64 bg-gray-50 rounded flex items-center justify-center">
                                <div class="text-center">
                                    <div class="text-4xl mb-2">💧</div>
                                    <p class="text-gray-600">12,450L used this month</p>
                                    <p class="text-sm text-gray-500 mt-2">8% reduction from last month</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                        <div class="bg-white p-6 rounded-lg shadow-sm border text-center">
                            <div class="text-3xl mb-2">🌾</div>
                            <div class="text-2xl font-bold text-gray-800">2,450 kg</div>
                            <p class="text-sm text-gray-600">Expected Harvest</p>
                            <p class="text-xs text-green-600 mt-1">↗️ +15% vs last season</p>
                        </div>
                        
                        <div class="bg-white p-6 rounded-lg shadow-sm border text-center">
                            <div class="text-3xl mb-2">💰</div>
                            <div class="text-2xl font-bold text-gray-800">$8,750</div>
                            <p class="text-sm text-gray-600">Operating Costs</p>
                            <p class="text-xs text-green-600 mt-1">↘️ -5% vs budget</p>
                        </div>
                        
                        <div class="bg-white p-6 rounded-lg shadow-sm border text-center">
                            <div class="text-3xl mb-2">🎯</div>
                            <div class="text-2xl font-bold text-gray-800">92%</div>
                            <p class="text-sm text-gray-600">Efficiency Score</p>
                            <p class="text-xs text-green-600 mt-1">↗️ +3% this month</p>
                        </div>
                    </div>
                    
                    <div class="bg-white p-6 rounded-lg shadow-sm border">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold">📋 Export Reports</h3>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                            <button onclick="exportReport('pdf')" class="p-4 border border-gray-200 rounded-lg hover:bg-gray-50 text-center">
                                <div class="text-2xl mb-2">📄</div>
                                <p class="text-sm font-medium">PDF Report</p>
                            </button>
                            <button onclick="exportReport('excel')" class="p-4 border border-gray-200 rounded-lg hover:bg-gray-50 text-center">
                                <div class="text-2xl mb-2">📊</div>
                                <p class="text-sm font-medium">Excel Export</p>
                            </button>
                            <button onclick="exportReport('csv')" class="p-4 border border-gray-200 rounded-lg hover:bg-gray-50 text-center">
                                <div class="text-2xl mb-2">📋</div>
                                <p class="text-sm font-medium">CSV Data</p>
                            </button>
                            <button onclick="exportReport('summary')" class="p-4 border border-gray-200 rounded-lg hover:bg-gray-50 text-center">
                                <div class="text-2xl mb-2">📝</div>
                                <p class="text-sm font-medium">Summary</p>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Tasks Section -->
                <div id="tasksSection" class="section hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">✅ Tasks & Alerts</h2>
                        <button onclick="showModal('assignTaskModal')" class="bg-agri-green text-white px-4 py-2 rounded-md hover:bg-green-600">📌 Assign Task</button>
                    </div>
                    
                    <div class="mb-6">
                        <div class="flex space-x-4">
                            <button onclick="filterTasks('all')" class="task-filter active px-4 py-2 rounded-md bg-agri-green text-white">All</button>
                            <button onclick="filterTasks('pending')" class="task-filter px-4 py-2 rounded-md bg-gray-200 text-gray-700 hover:bg-gray-300">Pending</button>
                            <button onclick="filterTasks('completed')" class="task-filter px-4 py-2 rounded-md bg-gray-200 text-gray-700 hover:bg-gray-300">Completed</button>
                            <button onclick="filterTasks('alerts')" class="task-filter px-4 py-2 rounded-md bg-gray-200 text-gray-700 hover:bg-gray-300">Alerts</button>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-lg shadow-sm border overflow-hidden">
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Type</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Task/Alert</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Priority</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Assigned To</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Due Date</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Status</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-200">
                                <tr class="task-row" data-type="alert">
                                    <td class="px-6 py-4 text-sm">🔔 Alert</td>
                                    <td class="px-6 py-4 text-sm">Water Tank B Low Level</td>
                                    <td class="px-6 py-4 text-sm"><span class="bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs">Critical</span></td>
                                    <td class="px-6 py-4 text-sm">John Farmer</td>
                                    <td class="px-6 py-4 text-sm">Immediate</td>
                                    <td class="px-6 py-4 text-sm"><span class="bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs">Active</span></td>
                                    <td class="px-6 py-4 text-sm">
                                        <button onclick="viewAlert('tank-b')" class="text-blue-600 hover:underline text-xs">View Details</button>
                                    </td>
                                </tr>
                                <tr class="task-row" data-type="pending">
                                    <td class="px-6 py-4 text-sm">💧 Irrigation</td>
                                    <td class="px-6 py-4 text-sm">Schedule Field A Irrigation</td>
                                    <td class="px-6 py-4 text-sm"><span class="bg-orange-100 text-orange-800 px-2 py-1 rounded-full text-xs">High</span></td>
                                    <td class="px-6 py-4 text-sm">John Farmer</td>
                                    <td class="px-6 py-4 text-sm">Tomorrow 6:00 AM</td>
                                    <td class="px-6 py-4 text-sm"><span class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs">Pending</span></td>
                                    <td class="px-6 py-4 text-sm">
                                        <button onclick="completeTask('irrigation-a')" class="text-green-600 hover:underline text-xs">Mark Complete</button>
                                    </td>
                                </tr>
                                <tr class="task-row" data-type="pending">
                                    <td class="px-6 py-4 text-sm">🐄 Livestock</td>
                                    <td class="px-6 py-4 text-sm">Pig Vaccination - P-001</td>
                                    <td class="px-6 py-4 text-sm"><span class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs">Medium</span></td>
                                    <td class="px-6 py-4 text-sm">Sarah Vet</td>
                                    <td class="px-6 py-4 text-sm">In 5 days</td>
                                    <td class="px-6 py-4 text-sm"><span class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs">Scheduled</span></td>
                                    <td class="px-6 py-4 text-sm">
                                        <button onclick="completeTask('vaccination-p001')" class="text-green-600 hover:underline text-xs">Mark Complete</button>
                                    </td>
                                </tr>
                                <tr class="task-row" data-type="completed">
                                    <td class="px-6 py-4 text-sm">🌱 Maintenance</td>
                                    <td class="px-6 py-4 text-sm">Field B Fertilizer Application</td>
                                    <td class="px-6 py-4 text-sm"><span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs">Low</span></td>
                                    <td class="px-6 py-4 text-sm">John Farmer</td>
                                    <td class="px-6 py-4 text-sm">Yesterday</td>
                                    <td class="px-6 py-4 text-sm"><span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs">Completed</span></td>
                                    <td class="px-6 py-4 text-sm">
                                        <span class="text-gray-400 text-xs">✓ Done</span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Settings Section -->
                <div id="settingsSection" class="section hidden">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6 ">⚙️ Settings</h2>
                    
                        <container gap: 20px class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"> 
                        <div class="bg-white p-6 rounded-lg shadow-sm border">
                            <h3 class="text-lg font-semibold mb-4">🔔 Notification Settings</h3>
                            <div class="space-y-4">
                                <div class="flex items-center justify-between">
                                    <span class="text-sm">Email Alerts</span>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" class="sr-only peer" checked>
                                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-agri-green"></div>
                                    </label>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-sm">SMS Notifications</span>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" class="sr-only peer">
                                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-agri-green"></div>
                                    </label>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-sm">Critical Alerts Only</span>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" class="sr-only peer" checked>
                                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-agri-green"></div>
                                    </label>
                                </div>
                            </div>
                        </div>
                        </container>
                        <br><br>
                        <container gap: 20px class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"> 
                            <div class="bg-white p-6 rounded-lg shadow-sm border">
                                <h3 class="text-lg font-semibold mb-4">🔐 Security Settings</h3>
                                <div class="space-y-4">
                                    <button class="w-full p-3 bg-gray-100 rounded text-left hover:bg-gray-200">
                                        🔑 Change Password
                                    </button>
                                    <button class="w-full p-3 bg-gray-100 rounded text-left hover:bg-gray-200">
                                        📱 Two-Factor Authentication
                                    </button>
                                    <button class="w-full p-3 bg-gray-100 rounded text-left hover:bg-gray-200">
                                        🔒 Session Management
                                    </button>
                                </div>
                            </div>
                        </container>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Modals -->
    <!-- Add Farm Modal -->
    <div id="addFarmModal" class="modal hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white p-6 rounded-lg shadow-xl w-96">
            <h3 class="text-lg font-semibold mb-4">➕ Add New Farm</h3>
            <form class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Farm Name</label>
                    <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md" placeholder="Enter farm name">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Location</label>
                    <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md" placeholder="City, State">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Size (acres)</label>
                    <input type="number" class="w-full px-3 py-2 border border-gray-300 rounded-md" placeholder="150">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Farm Type</label>
                    <select class="w-full px-3 py-2 border border-gray-300 rounded-md">
                        <option>Crop Farm</option>
                        <option>Livestock Farm</option>
                        <option>Mixed Farm</option>
                    </select>
                </div>
                <div class="flex space-x-3 pt-4">
                    <button type="button" onclick="hideModal('addFarmModal')" class="flex-1 px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50">Cancel</button>
                    <button type="submit" onclick="addFarm()" class="flex-1 bg-agri-green text-white px-4 py-2 rounded-md hover:bg-green-600">Add Farm</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Schedule Irrigation Modal -->
    <div id="scheduleIrrigationModal" class="modal hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white p-6 rounded-lg shadow-xl w-96">
            <h3 class="text-lg font-semibold mb-4">💧 Schedule Irrigation</h3>
            <form class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Field</label>
                    <select class="w-full px-3 py-2 border border-gray-300 rounded-md">
                        <option>Field A - Tomatoes</option>
                        <option>Field B - Corn</option>
                        <option>Field C - Wheat</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Date & Time</label>
                    <input type="datetime-local" class="w-full px-3 py-2 border border-gray-300 rounded-md">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Duration (minutes)</label>
                    <input type="number" class="w-full px-3 py-2 border border-gray-300 rounded-md" placeholder="30" value="30">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Water Amount (liters)</label>
                    <input type="number" class="w-full px-3 py-2 border border-gray-300 rounded-md" placeholder="500" value="500">
                </div>
                <div class="flex space-x-3 pt-4">
                    <button type="button" onclick="hideModal('scheduleIrrigationModal')" class="flex-1 px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50">Cancel</button>
                    <button type="submit" onclick="scheduleIrrigation()" class="flex-1 bg-agri-blue text-white px-4 py-2 rounded-md hover:bg-blue-600">Schedule</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Assign Task Modal -->
    <div id="assignTaskModal" class="modal hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white p-6 rounded-lg shadow-xl w-96">
            <h3 class="text-lg font-semibold mb-4">📌 Assign New Task</h3>
            <form class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Task Type</label>
                    <select class="w-full px-3 py-2 border border-gray-300 rounded-md">
                        <option>💧 Irrigation</option>
                        <option>🌱 Crop Maintenance</option>
                        <option>🐄 Livestock Care</option>
                        <option>🔧 Equipment Maintenance</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Task Description</label>
                    <textarea class="w-full px-3 py-2 border border-gray-300 rounded-md" rows="3" placeholder="Describe the task..."></textarea>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Assign To</label>
                    <select class="w-full px-3 py-2 border border-gray-300 rounded-md">
                        <option>John Farmer</option>
                        <option>Sarah Vet</option>
                        <option>Mike Technician</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Priority</label>
                    <select class="w-full px-3 py-2 border border-gray-300 rounded-md">
                        <option>Low</option>
                        <option>Medium</option>
                        <option>High</option>
                        <option>Critical</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Due Date</label>
                    <input type="datetime-local" class="w-full px-3 py-2 border border-gray-300 rounded-md">
                </div>
                <div class="flex space-x-3 pt-4">
                    <button type="button" onclick="hideModal('assignTaskModal')" class="flex-1 px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50">Cancel</button>
                    <button type="submit" onclick="assignTask()" class="flex-1 bg-agri-green text-white px-4 py-2 rounded-md hover:bg-green-600">Assign Task</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Manage Users Modal -->
    <div id="manageUsersModal" class="modal hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white p-6 rounded-lg shadow-xl w-96">
            <h3 class="text-lg font-semibold mb-4">👤 Manage Users</h3>
            <div class="space-y-4">
                <div class="max-h-64 overflow-y-auto">
                    <div class="space-y-3">
                        <div class="flex items-center justify-between p-3 bg-gray-50 rounded">
                            <div>
                                <p class="font-medium text-sm">John Farmer</p>
                                <p class="text-xs text-gray-600">Farmer Role</p>
                            </div>
                            <div class="flex space-x-2">
                                <button onclick="editUser('john')" class="text-xs text-blue-600 hover:underline">Edit</button>
                                <button onclick="removeUser('john')" class="text-xs text-red-600 hover:underline">Remove</button>
                            </div>
                        </div>
                        <div class="flex items-center justify-between p-3 bg-gray-50 rounded">
                            <div>
                                <p class="font-medium text-sm">Sarah Vet</p>
                                <p class="text-xs text-gray-600">Veterinarian Role</p>
                            </div>
                            <div class="flex space-x-2">
                                <button onclick="editUser('sarah')" class="text-xs text-blue-600 hover:underline">Edit</button>
                                <button onclick="removeUser('sarah')" class="text-xs text-red-600 hover:underline">Remove</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="flex space-x-3 pt-4">
                    <button type="button" onclick="hideModal('manageUsersModal')" class="flex-1 px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50">Close</button>
                    <button onclick="showModal('addUserModal')" class="flex-1 bg-agri-blue text-white px-4 py-2 rounded-md hover:bg-blue-600">Add User</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add User Modal -->
    <div id="addUserModal" class="modal hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white p-6 rounded-lg shadow-xl w-96">
            <h3 class="text-lg font-semibold mb-4">➕ Add New User</h3>
            <form class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Full Name</label>
                    <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md" placeholder="Enter full name">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                    <input type="email" class="w-full px-3 py-2 border border-gray-300 rounded-md" placeholder="Enter email">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Username</label>
                    <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md" placeholder="Enter username">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Role</label>
                    <select class="w-full px-3 py-2 border border-gray-300 rounded-md">
                        <option>Farmer</option>
                        <option>Admin</option>
                        <option>Veterinarian</option>
                        <option>Technician</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Assign to Farm</label>
                    <select class="w-full px-3 py-2 border border-gray-300 rounded-md">
                        <option>Green Valley Farm</option>
                        <option>Sunrise Ranch</option>
                        <option>Prairie Fields</option>
                        <option>All Farms</option>
                    </select>
                </div>
                <div class="flex space-x-3 pt-4">
                    <button type="button" onclick="hideModal('addUserModal')" class="flex-1 px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50">Cancel</button>
                    <button type="submit" onclick="addUser()" class="flex-1 bg-agri-green text-white px-4 py-2 rounded-md hover:bg-green-600">Add User</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        let currentUser = null;
        let currentSection = 'dashboardSection';

        // Authentication
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            if ((username === 'farmer' && password === 'password') || 
                (username === 'admin' && password === 'password')) {
                currentUser = {
                    username: username,
                    role: username === 'admin' ? 'Admin' : 'Farmer'
                };
                
                document.getElementById('loginScreen').classList.add('hidden');
                
                // Show appropriate dashboard based on role
                if (currentUser.role === 'Admin') {
                    document.getElementById('adminDashboard').classList.remove('hidden');
                    // Set active admin navigation
                    const firstAdminLink = document.querySelector('.admin-nav-link');
                    if (firstAdminLink) {
                        firstAdminLink.classList.add('active', 'bg-red-500', 'text-white');
                        firstAdminLink.classList.remove('text-gray-700', 'hover:bg-gray-100');
                    }
                } else {
                    document.getElementById('dashboard').classList.remove('hidden');
                    document.getElementById('userRole').textContent = currentUser.role;
                    // Set active navigation
                    const firstNavLink = document.querySelector('.nav-link');
                    if (firstNavLink) {
                        firstNavLink.classList.add('active', 'bg-agri-green', 'text-white');
                        firstNavLink.classList.remove('text-gray-700', 'hover:bg-gray-100');
                    }
                }
            } else {
                document.getElementById('loginError').classList.remove('hidden');
                setTimeout(() => {
                    document.getElementById('loginError').classList.add('hidden');
                }, 3000);
            }
        });

        function logout() {
            currentUser = null;
            document.getElementById('dashboard').classList.add('hidden');
            document.getElementById('adminDashboard').classList.add('hidden');
            document.getElementById('loginScreen').classList.remove('hidden');
            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
            
            // Reset navigation states
            document.querySelectorAll('.nav-link, .admin-nav-link').forEach(link => {
                link.classList.remove('active', 'bg-agri-green', 'bg-red-500', 'text-white');
                link.classList.add('text-gray-700');
            });
        }

        // Admin Navigation
        function showAdminSection(sectionId) {
            // Hide all admin sections
            document.querySelectorAll('.admin-section').forEach(section => {
                section.classList.add('hidden');
            });
            
            // Show selected section
            const targetSection = document.getElementById(sectionId);
            if (targetSection) {
                targetSection.classList.remove('hidden');
            }
            
            // Update navigation
            document.querySelectorAll('.admin-nav-link').forEach(link => {
                link.classList.remove('active', 'bg-red-500', 'text-white');
                link.classList.add('text-gray-700', 'hover:bg-gray-100');
            });
            
            // Set active state for clicked link
            if (event && event.target) {
                event.target.classList.add('active', 'bg-red-500', 'text-white');
                event.target.classList.remove('text-gray-700', 'hover:bg-gray-100');
            }
        }

        // Regular Navigation
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.add('hidden');
            });
            
            // Show selected section
            const targetSection = document.getElementById(sectionId);
            if (targetSection) {
                targetSection.classList.remove('hidden');
            }
            
            // Update navigation
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active', 'bg-agri-green', 'text-white');
                link.classList.add('text-gray-700', 'hover:bg-gray-100');
            });
            
            // Set active state for clicked link
            if (event && event.target) {
                event.target.classList.add('active', 'bg-agri-green', 'text-white');
                event.target.classList.remove('text-gray-700', 'hover:bg-gray-100');
            }
            
            currentSection = sectionId;
        }

        // Modal functions
        function showModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.remove('hidden');
            }
        }

        function hideModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.add('hidden');
            }
        }

        // Admin Functions
        function generateGlobalReport() {
            alert('🔑 Admin: Generating comprehensive global report across all farms... 📊');
        }

        function toggleProfileDropdown() {
            const dropdown = document.getElementById('profileDropdown');
            if (dropdown) {
                dropdown.classList.toggle('hidden');
            }
        }

        function resolveAlert(alertId) {
            alert(`🔑 Admin: Resolving critical alert ${alertId}... ✅`);
            if (event && event.target) {
                const alertElement = event.target.closest('.p-4');
                if (alertElement) {
                    alertElement.style.opacity = '0.5';
                }
            }
        }

        function troubleshootDevices() {
            alert('🔑 Admin: Initiating device troubleshooting protocol... 🔧');
        }

        function scheduleVaccination() {
            alert('🔑 Admin: Scheduling livestock vaccination... 💉');
        }

        function editUser(userId) {
            alert(`🔑 Admin: Editing user ${userId}... ✏️`);
        }

        function removeUser(userId) {
            if (confirm(`Are you sure you want to remove user ${userId}?`)) {
                alert(`🔑 Admin: User ${userId} removed successfully! 🗑️`);
                if (event && event.target) {
                    const userElement = event.target.closest('.p-3');
                    if (userElement) {
                        userElement.style.opacity = '0.5';
                    }
                }
            }
        }

        function addUser() {
            if (event) {
                event.preventDefault();
            }
            alert('🔑 Admin: New user added successfully! 👤✅');
            hideModal('addUserModal');
        }

        function viewFarmDetails(farmId) {
            alert(`🔑 Admin: Viewing detailed information for ${farmId}... 🔍`);
        }

        function editFarm(farmId) {
            alert(`🔑 Admin: Editing farm ${farmId}... ✏️`);
        }

        function deleteFarm(farmId) {
            if (confirm(`Are you sure you want to delete ${farmId}?`)) {
                alert(`🔑 Admin: Farm ${farmId} deleted successfully! 🗑️`);
                if (event && event.target) {
                    const farmRow = event.target.closest('tr');
                    if (farmRow) {
                        farmRow.style.opacity = '0.5';
                    }
                }
            }
        }

        function exportFarmsData() {
            alert('🔑 Admin: Exporting all farms data... 📊📄');
        }

        // Additional Admin Functions for Crops
        function bulkCropAction() {
            alert('🔑 Admin: Performing bulk actions on selected crops... 📋');
        }

        function exportCropsData() {
            alert('🔑 Admin: Exporting crops data... 🌱📊');
        }

        function viewCropDetails(cropId) {
            alert(`🔑 Admin: Viewing detailed information for crop ${cropId}... 🔍`);
        }

        function editCrop(cropId) {
            alert(`🔑 Admin: Editing crop ${cropId}... ✏️`);
        }

        function deleteCrop(cropId) {
            if (confirm(`Are you sure you want to delete crop ${cropId}?`)) {
                alert(`🔑 Admin: Crop ${cropId} deleted successfully! 🗑️`);
                if (event && event.target) {
                    const cropRow = event.target.closest('tr');
                    if (cropRow) {
                        cropRow.style.opacity = '0.5';
                    }
                }
            }
        }

        // Additional Admin Functions for Livestock
        function scheduleVetVisit() {
            alert('🔑 Admin: Scheduling veterinarian visit... 🏥');
        }

        function exportLivestockData() {
            alert('🔑 Admin: Exporting livestock data... 🐄📊');
        }

        function viewAnimalDetails(animalId) {
            alert(`🔑 Admin: Viewing detailed information for animal ${animalId}... 🔍`);
        }

        function treatAnimal(animalId) {
            alert(`🔑 Admin: Scheduling treatment for animal ${animalId}... 🏥`);
        }

        function editAnimal(animalId) {
            alert(`🔑 Admin: Editing animal ${animalId}... ✏️`);
        }

        function scheduleCheckup(animalId) {
            alert(`🔑 Admin: Scheduling checkup for animal ${animalId}... 📋`);
        }

        function manageBreeding() {
            alert('🔑 Admin: Managing breeding program... 💕');
        }

        // Regular Functions
        function addFarm() {
            if (event) {
                event.preventDefault();
            }
            alert('Farm added successfully! 🎉');
            hideModal('addFarmModal');
        }

       function scheduleIrrigation() {
            event.preventDefault();
            alert('Irrigation scheduled successfully! 💧');
            hideModal('scheduleIrrigationModal');
        }

        function toggleIrrigation(fieldId) {
            const isOn = event.target.checked;
            alert(`Irrigation for Field ${fieldId} ${isOn ? 'activated' : 'deactivated'} 💧`);
        }
         // Task management
        function assignTask() {
            event.preventDefault();
            alert('Task assigned successfully! 📌');
            hideModal('assignTaskModal');
        }

        function completeTask(taskId) {
            alert(`Task ${taskId} marked as complete! ✅`);
            event.target.closest('tr').style.opacity = '0.5';
        }

        function viewAlert(alertId) {
            alert(`Viewing alert details for ${alertId} 🔍`);
        }

        function filterTasks(type) {
            // Update filter buttons
            document.querySelectorAll('.task-filter').forEach(btn => {
                btn.classList.remove('bg-agri-green', 'text-white');
                btn.classList.add('bg-gray-200', 'text-gray-700');
            });
            event.target.classList.add('bg-agri-green', 'text-white');
            event.target.classList.remove('bg-gray-200', 'text-gray-700');

            // Filter table rows
            document.querySelectorAll('.task-row').forEach(row => {
                if (type === 'all' || row.dataset.type === type) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        }

        // Reports
        function generateReport() {
            alert('Generating comprehensive farm report... 📊');
        }

        function exportReport(format) {
            alert(`Exporting report as ${format.toUpperCase()}... 📄`);
        }

        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', function() {
            // Close dropdowns when clicking outside
            document.addEventListener('click', function(e) {
                const profileDropdown = document.getElementById('profileDropdown');
                if (profileDropdown && 
                    !e.target.closest('#profileDropdown') && 
                    !e.target.closest('button[onclick="toggleProfileDropdown()"]')) {
                    profileDropdown.classList.add('hidden');
                }
            });
        });

        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', function() {
            // Set active navigation
            document.querySelector('.nav-link').classList.add('active', 'bg-agri-green', 'text-white');
            
            // Simulate real-time updates
            setInterval(() => {
                // Update sensor values slightly
                const moistureEl = document.querySelector('.text-2xl.font-bold.text-gray-800');
                if (moistureEl && moistureEl.textContent.includes('%')) {
                    const currentValue = parseInt(moistureEl.textContent);
                    const newValue = currentValue + (Math.random() > 0.5 ? 1 : -1);
                    moistureEl.textContent = Math.max(0, Math.min(100, newValue)) + '%';
                }
            }, 5000);
        });


        // Add some interactive features
        document.addEventListener('click', function(e) {
            // Close modals when clicking outside
            if (e.target.classList.contains('modal')) {
                e.target.classList.add('hidden');
            }
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                document.querySelectorAll('.modal').forEach(modal => {
                    modal.classList.add('hidden');
                });
                const profileDropdown = document.getElementById('profileDropdown');
                if (profileDropdown) {
                    profileDropdown.classList.add('hidden');
                }
            }
        });
    </script>

    <style>
        .nav-link.active {
            background-color: #22c55e;
            color: white;
        }
        
        .nav-link:not(.active) {
            color: #374151;
        }
        
        .nav-link:not(.active):hover {
            background-color: #f3f4f6;
        }

        .admin-nav-link.active {
            background-color: #ef4444;
            color: white;
        }
        
        .admin-nav-link:not(.active) {
            color: #374151;
        }
        
        .admin-nav-link:not(.active):hover {
            background-color: #f3f4f6;
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 3px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #a1a1a1;
        }
        
        /* Animation for cards */
        .bg-white {
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        
        .bg-white:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        
        /* Loading animation for buttons */
        button:active {
            transform: scale(0.98);
        }

        /* Table hover effects */
        tbody tr:hover {
            background-color: #f9fafb;
        }

        /* Sortable table headers */
        th.cursor-pointer:hover {
            background-color: #e5e7eb;
        }
    </style>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'972abbcc04371061',t:'MTc1NTc4NTYzMy4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>

